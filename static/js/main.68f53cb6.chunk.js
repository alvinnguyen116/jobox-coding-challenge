(this["webpackJsonpjobox-coding-challenge"]=this["webpackJsonpjobox-coding-challenge"]||[]).push([[0],{116:function(e,t,r){e.exports=r(160)},121:function(e,t,r){},127:function(e,t,r){},154:function(e,t,r){},155:function(e,t,r){},156:function(e,t,r){},157:function(e,t,r){},159:function(e,t,r){},160:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(4),o=r.n(c),s=(r(121),r(18)),u=r(9),i=r.n(u),l=r(16),E=r(13),d=r(10);function f(e){return b.apply(this,arguments)}function b(){return(b=Object(l.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r="https://dog.ceo/api/breed/".concat(e,"/");return t&&(r+="".concat(t,"/")),f(r+="images")}var v=Object.freeze({INITIAL:"FETCH_DOGS_INITIAL",SUCCESS:"FETCH_DOGS_SUCCESS",FAILURE:"FETCH_DOGS_FAILURE"}),O=Object.freeze({INITIAL:"FETCH_BREEDS_INITIAL",SUCCESS:"FETCH_BREEDS_SUCCESS",FAILURE:"FETCH_BREEDS_FAILURE"}),h=Object.freeze({SET_CURRENT_BREED:"DOGS_SET_CURRENT_BREED",GET_RANDOM_DOGS:"DOGS_GET_RANDOM_DOGS",ADD_FAVORITE:"DOGS_ADD_FAVORITE",REMOVE_FAVORITE:"DOGS_REMOVE_FAVORITE",SET_SHOW_FAVORITES:"DOGS_SET_SHOW_FAVORITES",APPEND_CURRENT_DOGS:"DOGS_APPEND_CURRENT_DOGS"}),m=Object.freeze({SET_FIRST_SEARCH:"APP_SET_FIRST_SEARCH",SET_DARK_THEME:"APP_SET_DARK_THEME",SET_SINGLE_VIEW:"APP_SET_SINGLE_VIEW",SET_ERROR:"APP_SET_ERROR"});function S(){return{type:v.INITIAL}}function p(e){var t=e.breed,r=e.subBreed,n=e.res;return{type:v.SUCCESS,breed:t,subBreed:r,dogs:n.message}}function _(e){return{type:v.FAILURE,err:e}}function j(e){return{type:h.SET_CURRENT_BREED,currentBreed:e}}function R(){return{type:h.GET_RANDOM_DOGS}}function T(e){return{type:h.ADD_FAVORITE,dog:e}}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){var r=Object(l.a)(i.a.mark((function r(n){var a;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(S()),r.prev=1,r.next=4,g(e,t);case 4:"success"===(a=r.sent).status?n(p({breed:e,subBreed:t,res:a})):n(_(a)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),n(_(r.t0));case 11:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()}function w(e){return{type:m.SET_FIRST_SEARCH,firstSearch:e}}function N(e){return{type:m.SET_SINGLE_VIEW,singleView:e}}var I=r(163),A=r(11);r(127);var C=function(e){var t=e.url,r=e.isLoaded,n=e.isFavorite,c=e.singleView,o=e.dispatch,s=function(){var e=Object(l.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=4;break}o(n?(a=t,{type:h.REMOVE_FAVORITE,dog:a}):T(t)),e.next=8;break;case 4:return r.persist(),e.next=7,o(N(!0));case 7:r.target.scrollIntoViewIfNeeded();case 8:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}();return r?a.a.createElement("div",{className:"photo",key:t,onClick:s},a.a.createElement("div",{className:"card-container",style:{backgroundImage:"url(".concat(t,")")}}),c?a.a.createElement("div",{className:"buttons"},a.a.createElement(I.a,{className:n?"favorite":"",icon:A.a.STAR})):null):a.a.createElement("div",{className:"photo inactive"},a.a.createElement("div",{className:"card-container"}))},y=r(56),F=r(20);var k=function(e){var t=e.children,r=e.handleLastRow,c=e.className,o=void 0===c?"":c,s=Object(y.a)(),u=Object(d.a)(s,2),i=u[0],l=u[1],E=Object(F.debounce)(r,250);return Object(n.useEffect)((function(){l&&E()}),[l]),a.a.createElement("div",{className:o},t,a.a.createElement("div",{ref:i}))};function V(e,t){return(e%t+t)%t}function L(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function P(e){var t=e.breed,r=e.subBreed,n=void 0===r?null:r;return"".concat(n?L(n):""," ").concat(L(t)).trim()}function U(e){return new Promise((function(t){var r=new Image;r.addEventListener("load",t),r.setAttribute("src",e)}))}function B(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=Object(F.difference)(t,r),a=Object(E.a)(r);e>0&&0!==n.length;){var c=Object(F.random)(0,n.length-1),o=n.splice(c,1);o.length&&(a.push(o[0]),e--)}return a}function G(e){var t=e.breed,r=e.subBreed;return JSON.stringify({breed:t,subBreed:r})}function x(e,t){var r=t.breed,n=t.subBreed,a=t.dogs,c=G({breed:r,subBreed:n}),o=Object(F.cloneDeep)(e);return o[c]=c in o?new Set([].concat(Object(E.a)(o[c]),Object(E.a)(a))):new Set(a),o}r(154);var H=Object(s.b)((function(e){return{dogState:e.dogs,singleView:e.app.singleView}}))((function(e){var t=e.dogState,r=e.dispatch,c=e.singleView,o=t.currentBreed,s=t.dogs,u=t.currentDogs,i=t.favoriteDogs,l=t.showingFavoriteDogs,f=t.pageSize,b=l?i.length:s[o].size,g=Object(n.useState)([]),v=Object(d.a)(g,2),O=v[0],m=v[1];Object(n.useEffect)((function(){l&&m([])}),[l]),Object(n.useEffect)((function(){var e=!0,t=u.filter((function(e){return!O.includes(e)}));return function(e){var t=e.map(U);return Promise.allSettled(t)}(t).then((function(){e&&m([].concat(Object(E.a)(O),Object(E.a)(t)))})),function(){e=!1}}),[u]);var S=u.map((function(e){var t={url:e,key:e,isFavorite:i.includes(e),isLoaded:O.includes(e),singleView:c,dispatch:r};return a.a.createElement(C,t)}));return a.a.createElement(k,{className:"photos ".concat(c?" single-view":""),handleLastRow:function(){var e=u.length;e<b&&r(l?function(e){return{type:h.APPEND_CURRENT_DOGS,currentDogs:e}}(i.slice(e,e+f)):R())}},S)})),M=r(164);r(155);var z=Object(s.b)((function(e){return{darkTheme:e.app.darkTheme,showingFavoriteDogs:e.dogs.showingFavoriteDogs,singleView:e.app.singleView}}))((function(e){var t=e.dispatch,r=e.darkTheme,c=e.singleView,o=e.showingFavoriteDogs,s=Object(n.useState)(!1),u=Object(d.a)(s,2),i=u[0],l=u[1],E=Object(n.useState)(0),f=Object(d.a)(E,2),b=f[0],g=f[1];Object(n.useEffect)((function(){var e=Object(F.throttle)((function(){g(window.scrollY)}),100);return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]);var v="menu";return b>0&&(v+=" active"),c&&(v+=" single-view"),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:v},c?a.a.createElement("span",{className:"back-icon",onClick:function(){return t(N(!1))}},a.a.createElement(I.a,{icon:A.a.CHEVRON_LEFT})):null,a.a.createElement("span",{className:"menu-icon",onClick:function(){return l(!i)}},a.a.createElement(I.a,{icon:A.a.MENU}))),i?a.a.createElement("div",{className:"dialog-background",onClick:function(){return l(!1)}}):null,a.a.createElement(M.a,{in:i,unmountOnExit:!0,mountOnEnter:!0,classNames:"dialog",timeout:250},a.a.createElement("nav",null,a.a.createElement("ul",null,a.a.createElement("li",{className:o?"favorited":""},a.a.createElement(I.a,{icon:A.a.STAR}),a.a.createElement(I.b,{checked:o,onChange:function(){var e;t(w(!1)),t((e=!o,{type:h.SET_SHOW_FAVORITES,showFavoriteDogs:e})),l(!1)}})),a.a.createElement("li",null,a.a.createElement(I.a,{icon:A.a.MOON}),a.a.createElement(I.b,{checked:r,onChange:function(){return t(function(e){return{type:m.SET_DARK_THEME,darkTheme:e}}(!r))}}))))))})),W=r(49),K=r(50),q=r(54),J=r(51),Y=r(55),Q=r(19),X=(r(156),function(e){function t(e){var r;return Object(W.a)(this,t),(r=Object(q.a)(this,Object(J.a)(t).call(this,e))).state={hasError:!1},r}return Object(Y.a)(t,e),Object(K.a)(t,[{key:"componentDidCatch",value:function(e,t){this.props.dispatch(function(e){return{type:m.SET_ERROR,error:e}}({error:e,errorInfo:t}))}},{key:"render",value:function(){return this.state.hasError?a.a.createElement("main",{className:"error-boundary"},a.a.createElement("div",{className:"message"},a.a.createElement(I.a,{icon:A.a.ERROR,intent:Q.a.DANGER}),a.a.createElement("h1",null,"Sorry, something went wrong."),a.a.createElement("h2",null,"Please try again later."))):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(a.a.Component));r(157);var Z=function(e){var t=e.items,r=e.handleValueChange,c=e.handleOnFocus,o=e.firstSearch,s=Object.freeze({UP:38,DOWN:40,ENTER:13}),u=Object(n.useState)(""),i=Object(d.a)(u,2),l=i[0],E=i[1],f=Object(n.useState)(!1),b=Object(d.a)(f,2),g=b[0],v=b[1],O=Object(n.useState)([]),h=Object(d.a)(O,2),m=h[0],S=h[1],p=Object(n.useState)(0),_=Object(d.a)(p,2),j=_[0],R=_[1],T=Object(n.useState)("Search dog breed"),D=Object(d.a)(T,2),w=D[0],N=D[1],C=Object(n.useRef)(null),y=Object(n.useRef)(null);Object(n.useEffect)((function(){var e=y.current;e&&e.scrollIntoViewIfNeeded(!1)}),[j]),Object(n.useEffect)((function(){var e=function(e){C.current.contains(e.target)||v(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]),Object(n.useEffect)((function(){S(t)}),[t]),Object(n.useEffect)((function(){var e={};l in e||(e[l]=t.filter((function(e){return P(e).toLowerCase().includes(l.toLowerCase())}))),S(e[l])}),[l]),Object(n.useEffect)((function(){g||N("Search dog breed")}),[g]);var F=function(e){try{var t=function(e){return JSON.parse(e)}(e);E(P(t)),v(!1),r(t),R(0)}catch(n){console.log(n)}};return a.a.createElement("div",{className:"search-container",style:{width:o?"50%":"80%"},ref:C},a.a.createElement(I.a,{icon:A.a.SEARCH}),a.a.createElement("input",{type:"text",className:(g?"focus":"")+(g&&m.length?" dropdown":""),value:l,spellCheck:!1,onKeyUp:function(e){try{var t,r=m.length;switch(e.keyCode){case s.DOWN:t=V(j+1,r),R(t),N(P(m[t]));break;case s.UP:t=V(j-1,r),R(t),N(P(m[t]));break;case s.ENTER:F(G(m[j]))}}catch(n){console.log(n)}},onChange:function(e){try{E(e.target.value),v(!0),!e.target.value&&m.length&&N(P(m[0]))}catch(t){console.log(t)}},placeholder:w,onFocus:c}),function(){if(g&&m.length){var e=m.map((function(e,t){var r=G(e),n=P(e),c={className:"option",key:r,"data-value":r};return t===j&&(c.className+=" selected",c.ref=y),a.a.createElement("div",Object.assign({},c,{onClick:function(e){return F(e.target.dataset.value)}}),n)}));return a.a.createElement("div",{className:"options-container"},a.a.createElement("div",{className:"options"},e))}return null}())};function $(e){return{type:O.SUCCESS,breeds:e.message}}function ee(e){return{type:O.FAILURE,err:e}}r(158),r(159);var te=Object(s.b)((function(e){return{dogState:e.dogs,breeds:e.breeds.breeds,appState:e.app}}))((function(e){var t=e.appState,r=e.dogState,c=e.breeds,o=e.dispatch,s=t.firstSearch,u=t.darkTheme,E=t.singleView,d=r.dogs,b=r.currentBreed,g=r.showingFavoriteDogs,v=r.currentDogs;Object(n.useEffect)((function(){o(function(){var e=Object(l.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:O.INITIAL}),e.prev=1,e.next=4,f("https://dog.ceo/api/breeds/list/all");case 4:"success"===(r=e.sent).status?t($(r)):t(ee(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(ee(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){document.querySelector("html").className=u?"dark":"light"}),[u]),Object(n.useEffect)((function(){E?document.querySelector("html").style.setProperty("--card-length","90vw"):document.querySelector("html").style.setProperty("--card-length","32vw")}),[E]);var h=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.breed,n=t.subBreed,e.prev=1,(a=G({breed:r,subBreed:n}))in d){e.next=6;break}return e.next=6,o(D(r,n));case 6:return e.next=8,o(j(a));case 8:o(R()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),m=Object(n.useMemo)((function(){return b&&d[b]&&d[b].size?a.a.createElement(H,null):null}),[d,b]),S=a.a.createElement("div",{className:"no-favorites"},a.a.createElement("div",null,'Click on the "'),a.a.createElement(I.a,{icon:A.a.STAR_EMPTY}),a.a.createElement("div",null,'" icon to favorite a photo.')),p={items:c,handleValueChange:h,handleOnFocus:function(){o(w(!1))},firstSearch:s};return a.a.createElement(X,{dispatch:o},a.a.createElement("main",{className:E?"singleView":""},a.a.createElement("div",{className:"query-container ".concat(s?"first-search":"")},a.a.createElement(Z,p)),g&&!v.length?S:m),a.a.createElement(z,null))})),re=r(22),ne=r(52),ae=r.n(ne),ce=r(5),oe={inProgress:!1,dogs:{},pageSize:9,currentBreed:null,currentDogs:[],favoriteDogs:[],showingFavoriteDogs:!1,err:null},se={inProgress:!1,breeds:[],err:null};function ue(e){var t=[];return Object.entries(e).forEach((function(e){var r=Object(d.a)(e,2),n=r[0],a=r[1];a.length?a.forEach((function(e){return t.push({breed:n,subBreed:e})})):t.push({breed:n,subBreed:null})})),t}var ie={firstSearch:!0,darkTheme:!0,singleView:!1,error:null},le=Object(re.c)({dogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0,r=e.dogs,n=e.pageSize,a=e.currentBreed,c=e.currentDogs,o=e.favoriteDogs;switch(t.type){case v.INITIAL:return Object(ce.a)({},e,{inProgress:!0,err:null});case v.SUCCESS:return r=x(e.dogs,t),Object(ce.a)({},e,{inProgress:!1,dogs:r,err:null});case v.FAILURE:return Object(ce.a)({},e,{inProgress:!1,err:t.err});case h.SET_CURRENT_BREED:return Object(ce.a)({},e,{currentBreed:t.currentBreed,showingFavoriteDogs:!1,currentDogs:[]});case h.GET_RANDOM_DOGS:return c=B(n,Array.from(r[a]),c),Object(ce.a)({},e,{currentDogs:c});case h.APPEND_CURRENT_DOGS:return Object(ce.a)({},e,{currentDogs:[].concat(Object(E.a)(c),Object(E.a)(t.currentDogs))});case h.ADD_FAVORITE:return Object(ce.a)({},e,{favoriteDogs:[].concat(Object(E.a)(o),[t.dog])});case h.REMOVE_FAVORITE:var s=Object(E.a)(o),u=s.findIndex((function(e){return e===t.dog}));return u>-1&&s.splice(u,1),Object(ce.a)({},e,{favoriteDogs:s});case h.SET_SHOW_FAVORITES:return t.showFavoriteDogs?Object(ce.a)({},e,{showingFavoriteDogs:!0,currentDogs:o.slice(0,n)}):(c=[],a&&r[a]&&(c=Array.from(r[a]).slice(0,n)),Object(ce.a)({},e,{showingFavoriteDogs:!1,currentDogs:c}));default:return e}},breeds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.INITIAL:return Object(ce.a)({},e,{inProgress:!0,breeds:[],err:null});case O.SUCCESS:var r=ue(t.breeds);return Object(ce.a)({},e,{inProgress:!1,breeds:r,err:null});case O.FAILURE:return Object(ce.a)({},e,{inProgress:!1,breeds:[],err:t.err});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.SET_FIRST_SEARCH:return Object(ce.a)({},e,{firstSearch:t.firstSearch});case m.SET_DARK_THEME:return Object(ce.a)({},e,{darkTheme:t.darkTheme});case m.SET_SINGLE_VIEW:return Object(ce.a)({},e,{singleView:t.singleView});case m.SET_ERROR:return Object(ce.a)({},e,{error:t.error});default:return e}}}),Ee=r(53),de=Object(re.a)(ae.a,Ee.a),fe=Object(re.d)(le,de);o.a.render(a.a.createElement(s.a,{store:fe},a.a.createElement(te,null)),document.getElementById("root"))}},[[116,1,2]]]);
//# sourceMappingURL=main.68f53cb6.chunk.js.map