(this["webpackJsonpjobox-coding-challenge"]=this["webpackJsonpjobox-coding-challenge"]||[]).push([[0],{116:function(e,t,n){e.exports=n(160)},121:function(e,t,n){},127:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},157:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(4),o=n.n(c),s=(n(121),n(18)),u=n(9),i=n.n(u),l=n(16),E=n(13),d=n(10);function f(e){return b.apply(this,arguments)}function b(){return(b=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="https://dog.ceo/api/breed/".concat(e,"/");return t&&(n+="".concat(t,"/")),f(n+="images")}var v=Object.freeze({INITIAL:"FETCH_DOGS_INITIAL",SUCCESS:"FETCH_DOGS_SUCCESS",FAILURE:"FETCH_DOGS_FAILURE"}),O=Object.freeze({INITIAL:"FETCH_BREEDS_INITIAL",SUCCESS:"FETCH_BREEDS_SUCCESS",FAILURE:"FETCH_BREEDS_FAILURE"}),h=Object.freeze({SET_CURRENT_BREED:"DOGS_SET_CURRENT_BREED",GET_RANDOM_DOGS:"DOGS_GET_RANDOM_DOGS",ADD_FAVORITE:"DOGS_ADD_FAVORITE",REMOVE_FAVORITE:"DOGS_REMOVE_FAVORITE",SET_SHOW_FAVORITES:"DOGS_SET_SHOW_FAVORITES",APPEND_CURRENT_DOGS:"DOGS_APPEND_CURRENT_DOGS"}),m=Object.freeze({SET_FIRST_SEARCH:"APP_SET_FIRST_SEARCH",SET_DARK_THEME:"APP_SET_DARK_THEME",SET_SINGLE_VIEW:"APP_SET_SINGLE_VIEW",SET_ERROR:"APP_SET_ERROR"});function S(){return{type:v.INITIAL}}function p(e){var t=e.breed,n=e.subBreed,r=e.res;return{type:v.SUCCESS,breed:t,subBreed:n,dogs:r.message}}function _(e){return{type:v.FAILURE,err:e}}function j(e){return{type:h.SET_CURRENT_BREED,currentBreed:e}}function R(){return{type:h.GET_RANDOM_DOGS}}function T(e){return{type:h.ADD_FAVORITE,dog:e}}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){var n=Object(l.a)(i.a.mark((function n(r){var a;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(S()),n.prev=1,n.next=4,g(e,t);case 4:"success"===(a=n.sent).status?r(p({breed:e,subBreed:t,res:a})):r(_(a)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),r(_(n.t0));case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()}function w(e){return{type:m.SET_FIRST_SEARCH,firstSearch:e}}function N(e){return{type:m.SET_SINGLE_VIEW,singleView:e}}var I=n(163),A=n(11);n(127);var y=function(e){var t=e.url,n=e.isLoaded,r=e.isFavorite,c=e.singleView,o=e.dispatch,s=function(){var e=Object(l.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=4;break}o(r?(a=t,{type:h.REMOVE_FAVORITE,dog:a}):T(t)),e.next=8;break;case 4:return n.persist(),e.next=7,o(N(!0));case 7:n.target.scrollIntoViewIfNeeded();case 8:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}();return n?a.a.createElement("div",{className:"photo",key:t,onClick:s},a.a.createElement("div",{className:"card-container",style:{backgroundImage:"url(".concat(t,")")}}),c?a.a.createElement("div",{className:"buttons"},a.a.createElement(I.a,{className:r?"favorite":"",icon:A.a.STAR})):null):a.a.createElement("div",{className:"photo inactive"},a.a.createElement("div",{className:"card-container"}))},C=n(56),F=n(20);var k=function(e){var t=e.children,n=e.handleLastRow,c=e.className,o=void 0===c?"":c,s=Object(C.a)(),u=Object(d.a)(s,2),i=u[0],l=u[1],E=Object(F.debounce)(n,250);return Object(r.useEffect)((function(){l&&E()}),[l]),a.a.createElement("div",{className:o},t,a.a.createElement("div",{ref:i}))};function V(e,t){return(e%t+t)%t}function L(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function P(e){var t=e.breed,n=e.subBreed,r=void 0===n?null:n;return"".concat(r?L(r):""," ").concat(L(t)).trim()}function U(e){return new Promise((function(t){var n=new Image;n.addEventListener("load",t),n.setAttribute("src",e)}))}function B(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Object(F.difference)(t,n),a=Object(E.a)(n);e>0&&0!==r.length;){var c=Object(F.random)(0,r.length-1),o=r.splice(c,1);o.length&&(a.push(o[0]),e--)}return a}function G(e){var t=e.breed,n=e.subBreed;return JSON.stringify({breed:t,subBreed:n})}function x(e,t){var n=t.breed,r=t.subBreed,a=t.dogs,c=G({breed:n,subBreed:r}),o=Object(F.cloneDeep)(e);return o[c]=c in o?new Set([].concat(Object(E.a)(o[c]),Object(E.a)(a))):new Set(a),o}n(154);var H=Object(s.b)((function(e){return{dogState:e.dogs,singleView:e.app.singleView}}))((function(e){var t=e.dogState,n=e.dispatch,c=e.singleView,o=t.currentBreed,s=t.dogs,u=t.currentDogs,i=t.favoriteDogs,l=t.showingFavoriteDogs,f=t.pageSize,b=l?i.length:s[o].size,g=Object(r.useState)([]),v=Object(d.a)(g,2),O=v[0],m=v[1];Object(r.useEffect)((function(){var e=!0,t=u.filter((function(e){return!O.includes(e)}));return function(e){var t=e.map(U);return Promise.allSettled(t)}(t).then((function(){e&&m([].concat(Object(E.a)(O),Object(E.a)(t)))})),function(){e=!1}}),[u]),Object(r.useEffect)((function(){l&&m([])}),[l]);var S=u.map((function(e){var t={url:e,key:e,isFavorite:i.includes(e),isLoaded:O.includes(e),singleView:c,dispatch:n};return a.a.createElement(y,t)}));return a.a.createElement(k,{className:"photos ".concat(c?" single-view":""),handleLastRow:function(){var e=u.length;e<b&&n(l?function(e){return{type:h.APPEND_CURRENT_DOGS,currentDogs:e}}(i.slice(e,e+f)):R())}},S)})),M=n(164);n(155);var z=Object(s.b)((function(e){return{darkTheme:e.app.darkTheme,showingFavoriteDogs:e.dogs.showingFavoriteDogs,singleView:e.app.singleView}}))((function(e){var t=e.dispatch,n=e.darkTheme,c=e.singleView,o=e.showingFavoriteDogs,s=Object(r.useState)(!1),u=Object(d.a)(s,2),i=u[0],l=u[1],E=Object(r.useState)(0),f=Object(d.a)(E,2),b=f[0],g=f[1];Object(r.useEffect)((function(){var e=Object(F.throttle)((function(){g(window.scrollY)}),100);return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]);var v="menu";return b>0&&(v+=" active"),c&&(v+=" single-view"),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:v},c?a.a.createElement("span",{className:"back-icon",onClick:function(){return t(N(!1))}},a.a.createElement(I.a,{icon:A.a.CHEVRON_LEFT})):null,a.a.createElement("span",{className:"menu-icon",onClick:function(){return l(!i)}},a.a.createElement(I.a,{icon:A.a.MENU}))),i?a.a.createElement("div",{className:"dialog-background",onClick:function(){return l(!1)}}):null,a.a.createElement(M.a,{in:i,unmountOnExit:!0,mountOnEnter:!0,classNames:"dialog",timeout:250},a.a.createElement("nav",null,a.a.createElement("ul",null,a.a.createElement("li",{className:o?"favorited":""},a.a.createElement(I.a,{icon:A.a.STAR}),a.a.createElement(I.b,{checked:o,onChange:function(){var e;t(w(!1)),t((e=!o,{type:h.SET_SHOW_FAVORITES,showFavoriteDogs:e})),l(!1)}})),a.a.createElement("li",null,a.a.createElement(I.a,{icon:A.a.MOON}),a.a.createElement(I.b,{checked:n,onChange:function(){return t(function(e){return{type:m.SET_DARK_THEME,darkTheme:e}}(!n))}}))))))})),W=n(49),K=n(50),q=n(54),J=n(51),Y=n(55),Q=n(19),X=(n(156),function(e){function t(e){var n;return Object(W.a)(this,t),(n=Object(q.a)(this,Object(J.a)(t).call(this,e))).state={hasError:!1},n}return Object(Y.a)(t,e),Object(K.a)(t,[{key:"componentDidCatch",value:function(e,t){this.props.dispatch(function(e){return{type:m.SET_ERROR,error:e}}({error:e,errorInfo:t}))}},{key:"render",value:function(){return this.state.hasError?a.a.createElement("main",{className:"error-boundary"},a.a.createElement("div",{className:"message"},a.a.createElement(I.a,{icon:A.a.ERROR,intent:Q.a.DANGER}),a.a.createElement("h1",null,"Sorry, something went wrong."),a.a.createElement("h2",null,"Please try again later."))):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(a.a.Component));n(157);var Z=function(e){var t=e.items,n=e.handleValueChange,c=e.handleOnFocus,o=e.firstSearch,s=Object.freeze({UP:38,DOWN:40,ENTER:13}),u=Object(r.useState)(""),i=Object(d.a)(u,2),l=i[0],E=i[1],f=Object(r.useState)(!1),b=Object(d.a)(f,2),g=b[0],v=b[1],O=Object(r.useState)([]),h=Object(d.a)(O,2),m=h[0],S=h[1],p=Object(r.useState)(0),_=Object(d.a)(p,2),j=_[0],R=_[1],T=Object(r.useState)("Search dog breed"),D=Object(d.a)(T,2),w=D[0],N=D[1],y=Object(r.useRef)(null),C=Object(r.useRef)(null);Object(r.useEffect)((function(){var e=C.current;e&&e.scrollIntoViewIfNeeded(!1)}),[j]),Object(r.useEffect)((function(){var e=function(e){y.current.contains(e.target)||v(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]),Object(r.useEffect)((function(){S(t)}),[t]),Object(r.useEffect)((function(){var e={};l in e||(e[l]=t.filter((function(e){return P(e).toLowerCase().includes(l)}))),S(e[l])}),[l]),Object(r.useEffect)((function(){g||N("Search dog breed")}),[g]);var F=function(e){try{var t=function(e){return JSON.parse(e)}(e);E(P(t)),v(!1),n(t),R(0)}catch(r){console.log(r)}};return a.a.createElement("div",{className:"search-container",style:{width:o?"50%":"80%"},ref:y},a.a.createElement(I.a,{icon:A.a.SEARCH}),a.a.createElement("input",{type:"text",className:(g?"focus":"")+(g&&m.length?" dropdown":""),value:l,spellCheck:!1,onKeyUp:function(e){try{var t,n=m.length;switch(e.keyCode){case s.DOWN:t=V(j+1,n),R(t),N(P(m[t]));break;case s.UP:t=V(j-1,n),R(t),N(P(m[t]));break;case s.ENTER:F(G(m[j]))}}catch(r){console.log(r)}},onChange:function(e){try{E(e.target.value),v(!0),!e.target.value&&m.length&&N(P(m[0]))}catch(t){console.log(t)}},placeholder:w,onFocus:c}),function(){if(g&&m.length){var e=m.map((function(e,t){var n=G(e),r=P(e),c={className:"option",key:n,"data-value":n};return t===j&&(c.className+=" selected",c.ref=C),a.a.createElement("div",Object.assign({},c,{onClick:function(e){return F(e.target.dataset.value)}}),r)}));return a.a.createElement("div",{className:"options-container"},a.a.createElement("div",{className:"options"},e))}return null}())};function $(e){return{type:O.SUCCESS,breeds:e.message}}function ee(e){return{type:O.FAILURE,err:e}}n(158),n(159);var te=Object(s.b)((function(e){return{dogState:e.dogs,breeds:e.breeds.breeds,appState:e.app}}))((function(e){var t=e.appState,n=e.dogState,c=e.breeds,o=e.dispatch,s=t.firstSearch,u=t.darkTheme,E=t.singleView,d=n.dogs,b=n.currentBreed,g=n.showingFavoriteDogs,v=n.currentDogs;Object(r.useEffect)((function(){o(function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:O.INITIAL}),e.prev=1,e.next=4,f("https://dog.ceo/api/breeds/list/all");case 4:"success"===(n=e.sent).status?t($(n)):t(ee(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(ee(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(r.useEffect)((function(){document.querySelector("html").className=u?"dark":"light"}),[u]),Object(r.useEffect)((function(){E?document.querySelector("html").style.setProperty("--card-length","90vw"):document.querySelector("html").style.setProperty("--card-length","32vw")}),[E]);var h=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.breed,r=t.subBreed,e.prev=1,(a=G({breed:n,subBreed:r}))in d){e.next=6;break}return e.next=6,o(D(n,r));case 6:return e.next=8,o(j(a));case 8:o(R()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),m=Object(r.useMemo)((function(){return b&&d[b]&&d[b].size?a.a.createElement(H,null):null}),[d,b]),S=a.a.createElement("div",{className:"no-favorites"},a.a.createElement("div",null,'Click on the "'),a.a.createElement(I.a,{icon:A.a.STAR_EMPTY}),a.a.createElement("div",null,'" icon to favorite a photo.')),p={items:c,handleValueChange:h,handleOnFocus:function(){o(w(!1))},firstSearch:s};return a.a.createElement(X,{dispatch:o},a.a.createElement("main",{className:E?"singleView":""},a.a.createElement("div",{className:"query-container ".concat(s?"first-search":"")},a.a.createElement(Z,p)),g&&!v.length?S:m),a.a.createElement(z,null))})),ne=n(22),re=n(52),ae=n.n(re),ce=n(5),oe={inProgress:!1,dogs:{},pageSize:9,currentBreed:null,currentDogs:[],favoriteDogs:[],showingFavoriteDogs:!1,err:null},se={inProgress:!1,breeds:[],err:null};function ue(e){var t=[];return Object.entries(e).forEach((function(e){var n=Object(d.a)(e,2),r=n[0],a=n[1];a.length?a.forEach((function(e){return t.push({breed:r,subBreed:e})})):t.push({breed:r,subBreed:null})})),t}var ie={firstSearch:!0,darkTheme:!0,singleView:!1,error:null},le=Object(ne.c)({dogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0,n=e.dogs,r=e.pageSize,a=e.currentBreed,c=e.currentDogs,o=e.favoriteDogs;switch(t.type){case v.INITIAL:return Object(ce.a)({},e,{inProgress:!0,err:null});case v.SUCCESS:return n=x(e.dogs,t),Object(ce.a)({},e,{inProgress:!1,dogs:n,err:null});case v.FAILURE:return Object(ce.a)({},e,{inProgress:!1,err:t.err});case h.SET_CURRENT_BREED:return Object(ce.a)({},e,{currentBreed:t.currentBreed,showingFavoriteDogs:!1,currentDogs:[]});case h.GET_RANDOM_DOGS:return c=B(r,Array.from(n[a]),c),Object(ce.a)({},e,{currentDogs:c});case h.APPEND_CURRENT_DOGS:return Object(ce.a)({},e,{currentDogs:[].concat(Object(E.a)(c),Object(E.a)(t.currentDogs))});case h.ADD_FAVORITE:return Object(ce.a)({},e,{favoriteDogs:[].concat(Object(E.a)(o),[t.dog])});case h.REMOVE_FAVORITE:var s=Object(E.a)(o),u=s.findIndex((function(e){return e===t.dog}));return u>-1&&s.splice(u,1),Object(ce.a)({},e,{favoriteDogs:s});case h.SET_SHOW_FAVORITES:return t.showFavoriteDogs?Object(ce.a)({},e,{showingFavoriteDogs:!0,currentDogs:o.slice(0,r)}):(c=[],a&&n[a]&&(c=Array.from(n[a]).slice(0,r)),Object(ce.a)({},e,{showingFavoriteDogs:!1,currentDogs:c}));default:return e}},breeds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.INITIAL:return Object(ce.a)({},e,{inProgress:!0,breeds:[],err:null});case O.SUCCESS:var n=ue(t.breeds);return Object(ce.a)({},e,{inProgress:!1,breeds:n,err:null});case O.FAILURE:return Object(ce.a)({},e,{inProgress:!1,breeds:[],err:t.err});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.SET_FIRST_SEARCH:return Object(ce.a)({},e,{firstSearch:t.firstSearch});case m.SET_DARK_THEME:return Object(ce.a)({},e,{darkTheme:t.darkTheme});case m.SET_SINGLE_VIEW:return Object(ce.a)({},e,{singleView:t.singleView});case m.SET_ERROR:return Object(ce.a)({},e,{error:t.error});default:return e}}}),Ee=n(53),de=Object(ne.a)(ae.a,Ee.a),fe=Object(ne.d)(le,de);o.a.render(a.a.createElement(s.a,{store:fe},a.a.createElement(te,null)),document.getElementById("root"))}},[[116,1,2]]]);
//# sourceMappingURL=main.c590dd51.chunk.js.map