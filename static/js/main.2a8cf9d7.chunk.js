(this["webpackJsonpjobox-coding-challenge"]=this["webpackJsonpjobox-coding-challenge"]||[]).push([[0],{112:function(e,t,r){e.exports=r(156)},117:function(e,t,r){},123:function(e,t,r){},150:function(e,t,r){},151:function(e,t,r){},152:function(e,t,r){},153:function(e,t,r){},155:function(e,t,r){},156:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(4),o=r.n(c),s=(r(117),r(19)),u=r(13),i=r.n(u),l=r(18),d=r(14),E=r(11),f=Object.freeze({INITIAL:"FETCH_DOGS_INITIAL",SUCCESS:"FETCH_DOGS_SUCCESS",FAILURE:"FETCH_DOGS_FAILURE"}),O=Object.freeze({INITIAL:"FETCH_BREEDS_INITIAL",SUCCESS:"FETCH_BREEDS_SUCCESS",FAILURE:"FETCH_BREEDS_FAILURE"}),b=Object.freeze({SET_CURRENT_BREED:"DOGS_SET_CURRENT_BREED",GET_RANDOM_DOGS:"DOGS_GET_RANDOM_DOGS",ADD_FAVORITE:"DOGS_ADD_FAVORITE",REMOVE_FAVORITE:"DOGS_REMOVE_FAVORITE",SHOW_FAVORITES:"DOGS_SHOW_FAVORITES",APPEND_CURRENT_DOGS:"DOGS_APPEND_CURRENT_DOGS"}),v=Object.freeze({SET_FIRST_SEARCH:"APP_SET_FIRST_SEARCH",SET_DARK_THEME:"APP_SET_DARK_THEME",SHOW_TOAST:"APP_SHOW_TOAST",SET_ERROR:"APP_SET_ERROR"});function h(e){return{type:v.SET_FIRST_SEARCH,firstSearch:e}}function m(e){return{type:v.SHOW_TOAST,showToast:e}}function S(e){return p.apply(this,arguments)}function p(){return(p=Object(l.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r="https://dog.ceo/api/breed/".concat(e,"/");return t&&(r+="".concat(t,"/")),S(r+="images")}function T(){return{type:f.INITIAL}}function R(e){var t=e.breed,r=e.subBreed,n=e.res;return{type:f.SUCCESS,breed:t,subBreed:r,dogs:n.message}}function j(e){return{type:f.FAILURE,err:e}}function _(e){return{type:b.SET_CURRENT_BREED,currentBreed:e}}function D(){return{type:b.GET_RANDOM_DOGS}}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){var r=Object(l.a)(i.a.mark((function r(n){var a;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(T()),r.prev=1,r.next=4,g(e,t);case 4:"success"===(a=r.sent).status?n(R({breed:e,subBreed:t,res:a})):n(j(a)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),n(j(r.t0));case 11:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()}var C=r(159),I=r(12);r(123);var N=function(e){var t=e.url,r=e.isLoaded,n=e.isFavorite,c=e.dispatch,o=Object.freeze({FAVORITE:"FAVORITE",COPY:"COPY"}),s=function(e){var r;switch(e.currentTarget.dataset.buttonOption){case o.COPY:navigator.clipboard.writeText(t),c(m(!0));break;case o.FAVORITE:c(n?(r=t,{type:b.REMOVE_FAVORITE,dog:r}):function(e){return{type:b.ADD_FAVORITE,dog:e}}(t))}};return r?a.a.createElement("div",{className:"photo",key:t},a.a.createElement("div",{className:"card-container",style:{backgroundImage:"url(".concat(t,")")},onClick:s,"data-button-option":o.COPY}),a.a.createElement("div",{className:"buttons"},a.a.createElement("span",{"data-button-option":o.FAVORITE,onClick:s},a.a.createElement(C.a,{className:n?"favorite":"",icon:I.a.STAR})))):a.a.createElement("div",{className:"photo inactive"},a.a.createElement("div",{className:"card-container"}))},w=r(58),y=r(21);var F=function(e){var t=e.children,r=e.handleLastRow,c=e.className,o=void 0===c?"":c,s=Object(w.a)(),u=Object(E.a)(s,2),i=u[0],l=u[1],d=Object(y.debounce)(r,250);return Object(n.useEffect)((function(){l&&d()}),[l]),a.a.createElement("div",{className:o},t,a.a.createElement("div",{ref:i}))};function k(e,t){return(e%t+t)%t}function P(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function B(e){var t=e.breed,r=e.subBreed,n=void 0===r?null:r;return"".concat(P(t)," ").concat(n?P(n):"").trim()}function L(e){return new Promise((function(t){var r=new Image;r.addEventListener("load",t),r.setAttribute("src",e)}))}function U(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=Object(y.difference)(t,r),a=Object(d.a)(r);e>0&&0!==n.length;){var c=Object(y.random)(0,n.length-1),o=n.splice(c,1);o.length&&(a.push(o[0]),e--)}return a}function H(e){var t=e.breed,r=e.subBreed;return JSON.stringify({breed:t,subBreed:r})}function V(e,t){var r=t.breed,n=t.subBreed,a=t.dogs,c=H({breed:r,subBreed:n}),o=Object(y.cloneDeep)(e);return o[c]=c in o?new Set([].concat(Object(d.a)(o[c]),Object(d.a)(a))):new Set(a),o}r(150);var G=Object(s.b)((function(e){return{dogState:e.dogs}}))((function(e){var t=e.dogState,r=e.dispatch,c=t.currentBreed,o=t.dogs,s=t.currentDogs,u=t.favoriteDogs,i=t.showingFavoriteDogs,l=t.pageSize,f=i?u.length:o[c].size,O=Object(n.useState)([]),v=Object(E.a)(O,2),h=v[0],m=v[1];Object(n.useEffect)((function(){var e=!0,t=s.filter((function(e){return!h.includes(e)}));return function(e){var t=e.map(L);return Promise.allSettled(t)}(t).then((function(){e&&m([].concat(Object(d.a)(h),Object(d.a)(t)))})),function(){e=!1}}),[s]);var S=s.map((function(e){var t={url:e,key:e,isFavorite:u.includes(e),isLoaded:h.includes(e),dispatch:r};return a.a.createElement(N,t)}));return a.a.createElement(F,{className:"photos",handleLastRow:function(){var e=s.length;e<f&&r(i?function(e){return{type:b.APPEND_CURRENT_DOGS,currentDogs:e}}(u.slice(e,e+l)):D())}},S)})),x=r(160);r(151);var M=Object(s.b)((function(e){return{darkTheme:e.app.darkTheme}}))((function(e){var t=e.dispatch,r=e.darkTheme,c=Object(n.useState)(!1),o=Object(E.a)(c,2),s=o[0],u=o[1],i=Object(n.useState)(0),l=Object(E.a)(i,2),d=l[0],f=l[1];return Object(n.useEffect)((function(){var e=Object(y.throttle)((function(){f(window.scrollY)}),100);return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"menu ".concat(d>0?"active":""),onClick:function(){return u(!s)}},a.a.createElement(C.a,{icon:I.a.MENU})),s?a.a.createElement("div",{className:"dialog-background",onClick:function(){return u(!1)}}):null,a.a.createElement(x.a,{in:s,unmountOnExit:!0,mountOnEnter:!0,classNames:"dialog",timeout:250},a.a.createElement("nav",null,a.a.createElement("ul",null,a.a.createElement("li",{onClick:function(){window.scroll({top:0,left:0,behavior:"smooth"}),t(h(!1)),t({type:b.SHOW_FAVORITES}),u(!1)}},a.a.createElement(C.a,{icon:I.a.STAR}),a.a.createElement("div",null,"Favorites")),a.a.createElement("li",null,a.a.createElement(C.a,{icon:I.a.MOON}),a.a.createElement(C.b,{checked:r,onChange:function(){return t(function(e){return{type:v.SET_DARK_THEME,darkTheme:e}}(!r))}}))))))})),z=r(51),W=r(52),Y=r(56),K=r(53),J=r(57),q=r(20),Q=(r(152),function(e){function t(e){var r;return Object(z.a)(this,t),(r=Object(Y.a)(this,Object(K.a)(t).call(this,e))).state={hasError:!1},r}return Object(J.a)(t,e),Object(W.a)(t,[{key:"componentDidCatch",value:function(e,t){this.props.dispatch(function(e){return{type:v.SET_ERROR,error:e}}({error:e,errorInfo:t}))}},{key:"render",value:function(){return this.state.hasError?a.a.createElement("main",{className:"error-boundary"},a.a.createElement("div",{className:"message"},a.a.createElement(C.a,{icon:I.a.ERROR,intent:q.a.DANGER}),a.a.createElement("h1",null,"Sorry, something went wrong."),a.a.createElement("h2",null,"Please try again later."))):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(a.a.Component));r(153);var X=function(e){var t=e.items,r=e.handleValueChange,c=e.firstSearch,o=Object.freeze({UP:38,DOWN:40,ENTER:13}),s=Object(n.useState)(""),u=Object(E.a)(s,2),i=u[0],l=u[1],d=Object(n.useState)(!1),f=Object(E.a)(d,2),O=f[0],b=f[1],v=Object(n.useState)([]),h=Object(E.a)(v,2),m=h[0],S=h[1],p=Object(n.useState)(0),g=Object(E.a)(p,2),T=g[0],R=g[1],j=Object(n.useState)("Search dog breed"),_=Object(E.a)(j,2),D=_[0],A=_[1],N=Object(n.useRef)(null),w=Object(n.useRef)(null);Object(n.useEffect)((function(){var e=w.current;e&&e.scrollIntoViewIfNeeded(!1)}),[T]),Object(n.useEffect)((function(){var e=function(e){N.current.contains(e.target)||b(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]),Object(n.useEffect)((function(){S(t)}),[t]),Object(n.useEffect)((function(){var e={};i in e||(e[i]=t.filter((function(e){var t=e.breed,r=e.subBreed;return"".concat(t," ").concat(r).slice(0,i.length).toLowerCase()===i.toLowerCase()}))),S(e[i])}),[i]),Object(n.useEffect)((function(){O||A("Search dog breed")}),[O]);var y=function(e){try{var t=function(e){return JSON.parse(e)}(e);l(B(t)),b(!1),r(t),R(0)}catch(n){console.log(n)}};return a.a.createElement("div",{className:"search-container",style:{width:c?"50%":"80%"},ref:N},a.a.createElement(C.a,{icon:I.a.SEARCH}),a.a.createElement("input",{type:"text",className:(O?"focus":"")+(O&&m.length?" dropdown":""),value:i,spellCheck:!1,onKeyUp:function(e){try{var t,r=m.length;switch(e.keyCode){case o.DOWN:t=k(T+1,r),R(t),A(B(m[t]));break;case o.UP:t=k(T-1,r),R(t),A(B(m[t]));break;case o.ENTER:y(H(m[T]))}}catch(n){console.log(n)}},onChange:function(e){try{l(e.target.value),b(!0),!e.target.value&&m.length&&A(B(m[0]))}catch(t){console.log(t)}},placeholder:D,onFocus:function(){b(!0),m.length&&A(B(m[0]))}}),function(){if(O&&m.length){var e=m.map((function(e,t){var r=H(e),n=B(e),c={className:"option",key:r,value:r};return t===T&&(c.className+=" selected",c.ref=w),a.a.createElement("option",c,n)}));return a.a.createElement("div",{className:"options-container"},a.a.createElement("div",{className:"options",onClick:function(e){return y(e.target.value)}},e))}return null}())};function Z(e){return{type:O.SUCCESS,breeds:e.message}}function $(e){return{type:O.FAILURE,err:e}}var ee=r(7);r(154),r(155);var te=Object(s.b)((function(e){return{dogState:e.dogs,breeds:e.breeds.breeds,appState:e.app}}))((function(e){var t=e.appState,r=e.dogState,c=e.breeds,o=e.dispatch,s=t.firstSearch,u=t.showToast,d=t.darkTheme,E=r.dogs,f=r.currentBreed,b=r.showingFavoriteDogs,v=r.currentDogs;Object(n.useEffect)((function(){o(function(){var e=Object(l.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:O.INITIAL}),e.prev=1,e.next=4,S("https://dog.ceo/api/breeds/list/all");case 4:"success"===(r=e.sent).status?t(Z(r)):t($(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t($(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){document.querySelector("html").className=d?"dark":"light"}),[d]);var p=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.breed,n=t.subBreed,s&&o(h(!1)),e.prev=2,(a=H({breed:r,subBreed:n}))in E){e.next=7;break}return e.next=7,o(A(r,n));case 7:return e.next=9,o(_(a));case 9:o(D()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),g=Object(n.useMemo)((function(){return f&&E[f]&&E[f].size?a.a.createElement(G,null):null}),[E,f]),T=a.a.createElement("div",{className:"no-favorites"},a.a.createElement("div",null,'Click on the "'),a.a.createElement(C.a,{icon:I.a.STAR_EMPTY}),a.a.createElement("div",null,'" icon to favorite a photo.'));return a.a.createElement(Q,{dispatch:o},a.a.createElement("main",null,a.a.createElement("div",{className:"query-container ".concat(s?"first-search":"")},a.a.createElement(X,{items:c,handleValueChange:p,firstSearch:s})),b&&!v.length?T:g),a.a.createElement(M,null),a.a.createElement(C.d,{position:ee.a.TOP},u?a.a.createElement(C.c,{icon:I.a.CLIPBOARD,message:"Copied to clipboard",onDismiss:function(){return o(m(!1))},timeout:2e3}):null))})),re=r(23),ne=r(54),ae=r.n(ne),ce=r(9),oe={inProgress:!1,dogs:{},pageSize:9,currentBreed:null,currentDogs:[],favoriteDogs:[],showingFavoriteDogs:!1,err:null},se={inProgress:!1,breeds:[],err:null};function ue(e){var t=[];return Object.entries(e).forEach((function(e){var r=Object(E.a)(e,2),n=r[0],a=r[1];a.length?a.forEach((function(e){return t.push({breed:n,subBreed:e})})):t.push({breed:n,subBreed:null})})),t}var ie={firstSearch:!0,darkTheme:!1,showToast:!1,error:null},le=Object(re.c)({dogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0,r=e.dogs,n=e.pageSize,a=e.currentBreed,c=e.currentDogs,o=e.favoriteDogs;switch(t.type){case f.INITIAL:return Object(ce.a)({},e,{inProgress:!0,err:null});case f.SUCCESS:return r=V(e.dogs,t),Object(ce.a)({},e,{inProgress:!1,dogs:r,err:null});case f.FAILURE:return Object(ce.a)({},e,{inProgress:!1,err:t.err});case b.SET_CURRENT_BREED:return Object(ce.a)({},e,{currentBreed:t.currentBreed,showingFavoriteDogs:!1,currentDogs:[]});case b.GET_RANDOM_DOGS:return c=U(n,Array.from(r[a]),c),Object(ce.a)({},e,{currentDogs:c});case b.APPEND_CURRENT_DOGS:return Object(ce.a)({},e,{currentDogs:[].concat(Object(d.a)(c),Object(d.a)(t.currentDogs))});case b.ADD_FAVORITE:return Object(ce.a)({},e,{favoriteDogs:[].concat(Object(d.a)(o),[t.dog])});case b.REMOVE_FAVORITE:var s=Object(d.a)(o),u=s.findIndex((function(e){return e===t.dog}));return u>-1&&s.splice(u,1),Object(ce.a)({},e,{favoriteDogs:s});case b.SHOW_FAVORITES:return Object(ce.a)({},e,{showingFavoriteDogs:!0,currentDogs:o.slice(0,n)});default:return e}},breeds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.INITIAL:return Object(ce.a)({},e,{inProgress:!0,breeds:[],err:null});case O.SUCCESS:var r=ue(t.breeds);return Object(ce.a)({},e,{inProgress:!1,breeds:r,err:null});case O.FAILURE:return Object(ce.a)({},e,{inProgress:!1,breeds:[],err:t.err});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.SET_FIRST_SEARCH:return Object(ce.a)({},e,{firstSearch:t.firstSearch});case v.SET_DARK_THEME:return Object(ce.a)({},e,{darkTheme:t.darkTheme});case v.SHOW_TOAST:return Object(ce.a)({},e,{showToast:t.showToast});case v.SET_ERROR:return Object(ce.a)({},e,{error:t.error});default:return e}}}),de=r(55),Ee=Object(re.a)(ae.a,de.a),fe=Object(re.d)(le,Ee);o.a.render(a.a.createElement(s.a,{store:fe},a.a.createElement(te,null)),document.getElementById("root"))}},[[112,1,2]]]);
//# sourceMappingURL=main.2a8cf9d7.chunk.js.map