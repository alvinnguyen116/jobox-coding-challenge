(this["webpackJsonpjobox-coding-challenge"]=this["webpackJsonpjobox-coding-challenge"]||[]).push([[0],{116:function(e,t,r){e.exports=r(160)},121:function(e,t,r){},127:function(e,t,r){},154:function(e,t,r){},155:function(e,t,r){},156:function(e,t,r){},157:function(e,t,r){},159:function(e,t,r){},160:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(4),s=r.n(c),o=(r(121),r(19)),u=r(7),i=r.n(u),l=r(13),E=r(14),d=r(11);function f(e){return b.apply(this,arguments)}function b(){return(b=Object(l.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:9,n="https://dog.ceo/api/breed/".concat(e,"/");return t&&(n+="".concat(t,"/")),f(n+="images/random/".concat(r))}var v=Object.freeze({INITIAL:"FETCH_DOGS_INITIAL",SUCCESS:"FETCH_DOGS_SUCCESS",FAILURE:"FETCH_DOGS_FAILURE"}),O=Object.freeze({INITIAL:"FETCH_BREEDS_INITIAL",SUCCESS:"FETCH_BREEDS_SUCCESS",FAILURE:"FETCH_BREEDS_FAILURE"}),p=Object.freeze({SET_CURRENT_BREED:"DOGS_SET_CURRENT_BREED",ADD_FAVORITE:"DOGS_ADD_FAVORITE",REMOVE_FAVORITE:"DOGS_REMOVE_FAVORITE",SET_SHOW_FAVORITES:"DOGS_SET_SHOW_FAVORITES",APPEND_CURRENT_DOGS:"DOGS_APPEND_CURRENT_DOGS",REFRESH_CURRENT_DOGS:"REFRESH_CURRENT_DOGS"}),m=Object.freeze({SET_FIRST_SEARCH:"APP_SET_FIRST_SEARCH",SET_DARK_THEME:"APP_SET_DARK_THEME",SET_SINGLE_VIEW:"APP_SET_SINGLE_VIEW",SET_ERROR:"APP_SET_ERROR"});function g(){return{type:v.INITIAL}}function S(e){var t=e.breed,r=e.subBreed,n=e.res;return{type:v.SUCCESS,breed:t,subBreed:r,dogs:n.message}}function R(e){return{type:v.FAILURE,err:e}}function _(e){return{type:p.SET_CURRENT_BREED,currentBreed:e}}function j(e){return{type:p.ADD_FAVORITE,dog:e}}function T(e){return{type:p.APPEND_CURRENT_DOGS,currentDogs:e}}function D(){return{type:p.REFRESH_CURRENT_DOGS}}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){var r=Object(l.a)(i.a.mark((function r(n){var a;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(g()),r.prev=1,r.next=4,h(e,t);case 4:"success"===(a=r.sent).status?n(S({breed:e,subBreed:t,res:a})):n(R(a)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),n(R(r.t0));case 11:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()}function w(e){return{type:m.SET_FIRST_SEARCH,firstSearch:e}}function I(e){return{type:m.SET_ERROR,error:e}}function C(e){return{type:m.SET_SINGLE_VIEW,singleView:e}}var A=r(163),y=r(10);r(127);var F=function(e){var t=e.url,r=e.isLoaded,n=e.isFavorite,c=e.singleView,s=e.dispatch,o=function(){var e=Object(l.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!c){e.next=5;break}s(n?(a=t,{type:p.REMOVE_FAVORITE,dog:a}):j(t)),e.next=9;break;case 5:return r.persist(),e.next=8,s(C(!0));case 8:r.target.scrollIntoViewIfNeeded();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),s(I(e.t0));case 14:case"end":return e.stop()}var a}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return r?a.a.createElement("div",{className:"photo",key:t,onClick:o},a.a.createElement("div",{className:"card-container",style:{backgroundImage:"url(".concat(t,")")}}),c?a.a.createElement("div",{className:"buttons"},a.a.createElement(A.a,{className:n?"favorite":"",icon:y.a.STAR})):null):a.a.createElement("div",{className:"photo inactive"},a.a.createElement("div",{className:"card-container"}))},k=r(56),V=r(18);var L=function(e){var t=e.children,r=e.handleLastRow,c=(e.dispatch,e.className),s=void 0===c?"":c,o=Object(k.a)(),u=Object(d.a)(o,2),i=u[0],l=u[1],E=Object(V.debounce)(r,250);return Object(n.useEffect)((function(){l&&E()}),[l]),a.a.createElement("div",{className:s},t,a.a.createElement("div",{ref:i}))};function U(e,t){return(e%t+t)%t}function x(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function P(e){var t=e.breed,r=e.subBreed,n=void 0===r?null:r;return"".concat(n?x(n):""," ").concat(x(t)).trim()}function B(e){return new Promise((function(t){var r=new Image;r.addEventListener("load",t),r.setAttribute("src",e)}))}function H(e){var t=e.breed,r=e.subBreed;return JSON.stringify({breed:t,subBreed:r})}function G(e,t){var r=t.breed,n=t.subBreed,a=t.dogs,c=H({breed:r,subBreed:n}),s=Object(V.cloneDeep)(e);return s[c]=c in s?new Set([].concat(Object(E.a)(s[c]),Object(E.a)(a))):new Set(a),s}var M=Object(V.memoize)((function(e,t){return e.filter((function(e){return P(e).toLowerCase().includes(t.toLowerCase())}))}),(function(){return arguments.length<=1?void 0:arguments[1]}));r(154);var z=Object(o.b)((function(e){return{dogState:e.dogs,singleView:e.app.singleView}}))((function(e){var t=e.dogState,r=e.dispatch,c=e.singleView,s=t.currentBreed,o=t.currentDogs,u=t.favoriteDogs,f=t.showingFavoriteDogs,b=t.pageSize,h=Object(n.useState)([]),v=Object(d.a)(h,2),O=v[0],p=v[1];Object(n.useEffect)((function(){f&&p([])}),[f]),Object(n.useEffect)((function(){var e=!0;try{var t=o.filter((function(e){return!O.includes(e)}));(function(e){var t=e.map(B);return Promise.allSettled(t)})(t).then((function(){e&&p([].concat(Object(E.a)(O),Object(E.a)(t)))}))}catch(n){r(I(n))}return function(){e=!1}}),[o]);var m=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=o.length,!f){e.next=6;break}r(T(u.slice(t,t+b))),e.next=10;break;case 6:return n=JSON.parse(s),a=n.breed,c=n.subBreed,e.next=9,r(N(a,c));case 9:r(D());case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r(I(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),g=o.map((function(e){var t={url:e,key:e,isFavorite:u.includes(e),isLoaded:O.includes(e),singleView:c,dispatch:r};return a.a.createElement(F,t)})),S={className:"photos ".concat(c?" single-view":""),handleLastRow:m,dispatch:r,children:g};return a.a.createElement(L,S)})),W=r(164);r(155);var J=Object(o.b)((function(e){return{darkTheme:e.app.darkTheme,showingFavoriteDogs:e.dogs.showingFavoriteDogs,singleView:e.app.singleView}}))((function(e){var t=e.dispatch,r=e.darkTheme,c=e.singleView,s=e.showingFavoriteDogs,o=Object(n.useState)(!1),u=Object(d.a)(o,2),i=u[0],l=u[1],E=Object(n.useState)(0),f=Object(d.a)(E,2),b=f[0],h=f[1];Object(n.useEffect)((function(){var e=Object(V.throttle)((function(){h(window.scrollY)}),100);return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]);var v="menu";return b>0&&(v+=" active"),c&&(v+=" single-view"),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:v},c?a.a.createElement("span",{className:"back-icon",onClick:function(){return t(C(!1))}},a.a.createElement(A.a,{icon:y.a.CHEVRON_LEFT})):null,a.a.createElement("span",{className:"menu-icon",onClick:function(){return l(!i)}},a.a.createElement(A.a,{icon:y.a.MENU}))),i?a.a.createElement("div",{className:"dialog-background",onClick:function(){return l(!1)}}):null,a.a.createElement(W.a,{in:i,unmountOnExit:!0,mountOnEnter:!0,classNames:"dialog",timeout:250},a.a.createElement("nav",null,a.a.createElement("ul",null,a.a.createElement("li",{className:s?"favorited":""},a.a.createElement(A.a,{icon:y.a.STAR}),a.a.createElement(A.b,{checked:s,onChange:function(){try{t(w(!1)),t(C(!1)),t((e=!s,{type:p.SET_SHOW_FAVORITES,showFavoriteDogs:e})),l(!1)}catch(r){t(I(r))}var e}})),a.a.createElement("li",null,a.a.createElement(A.a,{icon:y.a.MOON}),a.a.createElement(A.b,{checked:r,onChange:function(){return t(function(e){return{type:m.SET_DARK_THEME,darkTheme:e}}(!r))}}))))))})),K=r(49),q=r(50),Y=r(54),Q=r(51),X=r(55),Z=r(20),$=(r(156),function(e){function t(e){var r;return Object(K.a)(this,t),(r=Object(Y.a)(this,Object(Q.a)(t).call(this,e))).state={hasError:!1},r}return Object(X.a)(t,e),Object(q.a)(t,[{key:"componentDidCatch",value:function(e,t){this.props.dispatch(I({error:e,errorInfo:t}))}},{key:"render",value:function(){return this.state.hasError||this.props.hasError?a.a.createElement("main",{className:"error-boundary"},a.a.createElement("div",{className:"message"},a.a.createElement(A.a,{icon:y.a.ERROR,intent:Z.a.DANGER}),a.a.createElement("h1",null,"Sorry, something went wrong."),a.a.createElement("h2",null,"Please try again later."))):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(a.a.Component));r(157);var ee=function(e){var t=e.items,r=e.handleValueChange,c=e.handleOnFocus,s=e.firstSearch,o=e.dispatch,u=Object.freeze({UP:38,DOWN:40,ENTER:13}),i=Object(n.useRef)(null),l=Object(n.useState)(""),E=Object(d.a)(l,2),f=E[0],b=E[1],h=Object(n.useState)(!1),v=Object(d.a)(h,2),O=v[0],p=v[1],m=Object(n.useState)([]),g=Object(d.a)(m,2),S=g[0],R=g[1],_=Object(n.useState)(0),j=Object(d.a)(_,2),T=j[0],D=j[1],N=Object(n.useState)("Search dog breed"),w=Object(d.a)(N,2),C=w[0],F=w[1],k=Object(n.useRef)(null),V=Object(n.useRef)(null);Object(n.useEffect)((function(){try{var e=V.current;e&&e.scrollIntoViewIfNeeded(!1)}catch(t){o(I(t))}}),[T]),Object(n.useEffect)((function(){var e=function(e){k.current.contains(e.target)||p(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]),Object(n.useEffect)((function(){try{R(t)}catch(e){o(I(e))}}),[t]),Object(n.useEffect)((function(){var e=M(t,f);R(e)}),[f]),Object(n.useEffect)((function(){O||F("Search dog breed")}),[O]);var L=function(){try{b(""),i.current.focus()}catch(e){o(I(e))}},x=function(e){try{var t=function(e){return JSON.parse(e)}(e);b(P(t)),p(!1),r(t),D(0)}catch(n){o(I(n))}};return a.a.createElement("div",{className:"search-container",style:{width:s?"50%":"80%"},ref:k},a.a.createElement(A.a,{className:"search-btn",icon:y.a.SEARCH}),f?a.a.createElement("span",{onClick:L},a.a.createElement(A.a,{className:"close-btn",icon:y.a.SMALL_CROSS})):null,a.a.createElement("input",{type:"text",className:(O?"focus":"")+(O&&S.length?" dropdown":""),value:f,spellCheck:!1,onKeyUp:function(e){try{var t,r=S.length;switch(e.keyCode){case u.DOWN:t=U(T+1,r),D(t),F(P(S[t]));break;case u.UP:t=U(T-1,r),D(t),F(P(S[t]));break;case u.ENTER:x(H(S[T]))}}catch(n){o(I(n))}},onChange:function(e){try{b(e.target.value),p(!0),e.target.value||F("Search dog breed")}catch(t){o(I(t))}},placeholder:C,onFocus:c,ref:i}),function(){if(O&&S.length){var e=S.map((function(e,t){var r=H(e),n=P(e),c={className:"option",key:r,"data-value":r};return t===T&&(c.className+=" selected",c.ref=V),a.a.createElement("div",Object.assign({},c,{onClick:function(e){return x(e.target.dataset.value)}}),n)}));return a.a.createElement("div",{className:"options-container"},a.a.createElement("div",{className:"options"},e))}return null}())};function te(e){return{type:O.SUCCESS,breeds:e.message}}function re(e){return{type:O.FAILURE,err:e}}r(158),r(159);var ne=Object(o.b)((function(e){return{dogState:e.dogs,breeds:e.breeds.breeds,appState:e.app}}))((function(e){var t=e.appState,r=e.dogState,c=e.breeds,s=e.dispatch,o=t.firstSearch,u=t.darkTheme,E=t.singleView,d=t.hasError,b=r.dogs,h=r.currentBreed,v=r.showingFavoriteDogs,p=r.currentDogs;Object(n.useEffect)((function(){try{s(function(){var e=Object(l.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:O.INITIAL}),e.prev=1,e.next=4,f("https://dog.ceo/api/breeds/list/all");case 4:"success"===(r=e.sent).status?t(te(r)):t(re(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(re(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}catch(e){s(I(e))}}),[]),Object(n.useEffect)((function(){document.querySelector("html").className=u?"dark":"light"}),[u]);var m=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.breed,n=t.subBreed,e.prev=1,(a=H({breed:r,subBreed:n}))in b){e.next=6;break}return e.next=6,s(N(r,n));case 6:return e.next=8,s(_(a));case 8:s(D()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),s(I(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),g=Object(n.useMemo)((function(){return h&&b[h]&&b[h].size?a.a.createElement(z,null):null}),[b,h]),S=a.a.createElement("div",{className:"no-favorites"},a.a.createElement("div",null,'Click on the "'),a.a.createElement(A.a,{icon:y.a.STAR_EMPTY}),a.a.createElement("div",null,'" icon to favorite a photo.')),R={items:c,handleValueChange:m,handleOnFocus:function(){try{s(w(!1))}catch(e){s(I(e))}},firstSearch:o,dispatch:s};return a.a.createElement($,{dispatch:s,hasError:d},a.a.createElement("main",{className:E?"single-view":""},a.a.createElement("div",{className:"query-container ".concat(o?"first-search":"")},a.a.createElement(ee,R)),v&&!p.length?S:g),a.a.createElement(J,null))})),ae=r(22),ce=r(52),se=r.n(ce),oe=r(5),ue={inProgress:!1,dogs:{},pageSize:9,currentBreed:null,currentDogs:[],favoriteDogs:[],showingFavoriteDogs:!1,err:null},ie={inProgress:!1,breeds:[],err:null};function le(e){var t=[];return Object.entries(e).forEach((function(e){var r=Object(d.a)(e,2),n=r[0],a=r[1];a.length?a.forEach((function(e){return t.push({breed:n,subBreed:e})})):t.push({breed:n,subBreed:null})})),t}var Ee={firstSearch:!0,darkTheme:!0,singleView:!1,hasError:!1,error:null},de=Object(ae.c)({dogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0,r=e.dogs,n=e.pageSize,a=e.currentBreed,c=e.currentDogs,s=e.favoriteDogs;switch(t.type){case v.INITIAL:return Object(oe.a)({},e,{inProgress:!0,err:null});case v.SUCCESS:return r=G(e.dogs,t),Object(oe.a)({},e,{inProgress:!1,dogs:r,err:null});case v.FAILURE:return Object(oe.a)({},e,{inProgress:!1,err:t.err});case p.SET_CURRENT_BREED:return Object(oe.a)({},e,{currentBreed:t.currentBreed,showingFavoriteDogs:!1});case p.REFRESH_CURRENT_DOGS:return Object(oe.a)({},e,{currentDogs:Array.from(r[a])||[]});case p.APPEND_CURRENT_DOGS:return Object(oe.a)({},e,{currentDogs:[].concat(Object(E.a)(c),Object(E.a)(t.currentDogs))});case p.ADD_FAVORITE:return Object(oe.a)({},e,{favoriteDogs:[].concat(Object(E.a)(s),[t.dog])});case p.REMOVE_FAVORITE:var o=Object(E.a)(s),u=o.findIndex((function(e){return e===t.dog}));return u>-1&&o.splice(u,1),Object(oe.a)({},e,{favoriteDogs:o});case p.SET_SHOW_FAVORITES:return t.showFavoriteDogs?Object(oe.a)({},e,{showingFavoriteDogs:!0,currentDogs:s.slice(0,n)}):(c=[],a&&r[a]&&(c=Array.from(r[a]).slice(0,n)),Object(oe.a)({},e,{showingFavoriteDogs:!1,currentDogs:c}));default:return e}},breeds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.INITIAL:return Object(oe.a)({},e,{inProgress:!0,breeds:[],err:null});case O.SUCCESS:var r=le(t.breeds);return Object(oe.a)({},e,{inProgress:!1,breeds:r,err:null});case O.FAILURE:return Object(oe.a)({},e,{inProgress:!1,breeds:[],err:t.err});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.SET_FIRST_SEARCH:return Object(oe.a)({},e,{firstSearch:t.firstSearch});case m.SET_DARK_THEME:return Object(oe.a)({},e,{darkTheme:t.darkTheme});case m.SET_SINGLE_VIEW:return Object(oe.a)({},e,{singleView:t.singleView});case m.SET_ERROR:return Object(oe.a)({},e,{hasError:!0,error:t.error});default:return e}}}),fe=r(53),be=Object(ae.a)(se.a,fe.a),he=Object(ae.d)(de,be);s.a.render(a.a.createElement(o.a,{store:he},a.a.createElement(ne,null)),document.getElementById("root"))}},[[116,1,2]]]);
//# sourceMappingURL=main.095fa48b.chunk.js.map