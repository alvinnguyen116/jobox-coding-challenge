{"version":3,"sources":["api.js","redux/actions/actionTypes.js","redux/actions/dogs.js","redux/actions/app.js","components/non-connected/photo/photo.js","components/non-connected/infinite-scroll/infinite-scroll.js","util/util.js","components/connected/photos/photos.js","components/connected/menu/menu.js","components/non-connected/error-boundary/error-boundary.js","components/non-connected/search/search.js","redux/actions/breeds.js","components/connected/app/App.js","redux/reducers/dogs.js","redux/reducers/breeds.js","redux/reducers/app.js","redux/reducers/index.js","redux/store.js","index.js"],"names":["getJSON","url","a","fetch","res","json","fetchRandomDogs","breed","subBreed","pageSize","FETCH_DOGS","Object","freeze","INITIAL","SUCCESS","FAILURE","FETCH_BREEDS","DOGS","SET_CURRENT_BREED","ADD_FAVORITE","REMOVE_FAVORITE","SET_SHOW_FAVORITES","APPEND_CURRENT_DOGS","REFRESH_CURRENT_DOGS","APP","SET_FIRST_SEARCH","SET_DARK_THEME","SET_SINGLE_VIEW","SET_ERROR","initialAction","type","successAction","dogs","message","failureAction","err","setCurrentBreed","currentBreed","addFavorite","dog","appendCurrentDogs","currentDogs","refreshCurrentDogs","getRandomDogs","dispatch","status","setFirstSearch","firstSearch","setError","error","setSingleView","singleView","Photo","isLoaded","isFavorite","handleOnClick","e","persist","target","scrollIntoViewIfNeeded","className","key","onClick","style","backgroundImage","icon","IconNames","STAR","InfiniteScroll","children","handleLastRow","useInView","lastRowRef","lastRowInView","onLastRow","debounce","useEffect","ref","mod","num","n","capitalize","str","slice","toUpperCase","toLowerCase","prettifyBreed","trim","promisifyImage","src","Promise","resolve","img","Image","addEventListener","setAttribute","breedToKey","JSON","stringify","updateDogs","prevDogs","newDogs","cloneDeep","Set","memoizeFilterList","memoize","items","inputVal","filter","includes","connect","state","dogState","app","favoriteDogs","showingFavoriteDogs","useState","loadedPhotos","setLoadedPhotos","isMounted","notLoadedPhotos","photos","promises","map","allSettled","promisifyPhotos","then","length","parse","rows","props","infiniteScrollProps","darkTheme","menuOpen","setMenuOpen","scrollY","setScrollY","updateScroll","throttle","window","removeEventListener","menuClass","CHEVRON_LEFT","MENU","CSSTransition","in","unmountOnExit","mountOnEnter","classNames","timeout","checked","onChange","showFavoriteDogs","MOON","setDarkTheme","ErrorBoundary","hasError","errorInfo","this","ERROR","intent","Intent","DANGER","React","Component","Search","handleValueChange","handleOnFocus","KEY_CODE","UP","DOWN","ENTER","inputRef","useRef","setInputVal","showOptions","setShowOptions","filteredItems","setFilteredItems","selectedIndex","setSelectedIndex","placeholder","setPlaceholder","searchContainerRef","currOptionRef","current","handleClick","contains","document","focus","optionSelect","keyToBreed","SEARCH","SMALL_CROSS","value","spellCheck","onKeyUp","newIndex","keyCode","item","onFocus","options","i","val","label","dataset","renderOptions","breeds","appState","querySelector","dogPhotos","useMemo","size","noFavorites","STAR_EMPTY","searchProps","INITIAL_STATE","inProgress","formatBreeds","result","entries","forEach","subBreeds","push","combineReducers","prevState","action","Array","from","newFavoriteDogs","index","findIndex","splice","middleware","applyMiddleware","logger","thunk","createStore","finalReducer","ReactDOM","render","store","getElementById"],"mappings":"qbAMeA,E,8EAAf,WAAuBC,GAAvB,eAAAC,EAAA,+EAE0BC,MAAMF,GAFhC,cAEcG,EAFd,gBAGqBA,EAAIC,OAHzB,6I,sBAiBO,SAASC,EAAgBC,GAAuC,IAAhCC,EAA+B,uDAApB,KAAMC,EAAc,uDAAH,EAC3DR,EAAG,oCAAgCM,EAAhC,KAGP,OAFIC,IAAUP,GAAG,UAAOO,EAAP,MAEVR,EADPC,GAAG,wBAAqBQ,IC1BrB,IAAMC,EAAaC,OAAOC,OAAO,CACpCC,QAAS,qBACTC,QAAS,qBACTC,QAAS,uBAGAC,EAAeL,OAAOC,OAAO,CACtCC,QAAS,uBACTC,QAAS,uBACTC,QAAS,yBAGAE,EAAON,OAAOC,OAAO,CAC9BM,kBAAmB,yBACnBC,aAAc,oBACdC,gBAAiB,uBACjBC,mBAAoB,0BACpBC,oBAAqB,2BACrBC,qBAAsB,yBAGbC,EAAMb,OAAOC,OAAO,CAC7Ba,iBAAkB,uBAClBC,eAAgB,qBAChBC,gBAAiB,sBACjBC,UAAW,kBCtBf,SAASC,IACL,MAAO,CACHC,KAAMpB,EAAWG,SAIzB,SAASkB,EAAT,GAA8C,IAAtBxB,EAAqB,EAArBA,MAAMC,EAAe,EAAfA,SAASJ,EAAM,EAANA,IACnC,MAAO,CACH0B,KAAMpB,EAAWI,QACjBP,QACAC,WACAwB,KAAM5B,EAAI6B,SAIlB,SAASC,EAAcC,GACnB,MAAO,CACHL,KAAMpB,EAAWK,QACjBoB,OAID,SAASC,EAAgBC,GAC5B,MAAO,CACHP,KAAMb,EAAKC,kBACXmB,gBAWD,SAASC,EAAYC,GACxB,MAAO,CACHT,KAAMb,EAAKE,aACXoB,OAWD,SAASC,EAAkBC,GAC9B,MAAO,CACHX,KAAMb,EAAKK,oBACXmB,eAID,SAASC,IACZ,MAAO,CACHZ,KAAMb,EAAKM,sBAIZ,SAASoB,EAAcpC,GAAuB,IAAhBC,EAAe,uDAAN,KAC1C,8CAAO,WAAOoC,GAAP,eAAA1C,EAAA,6DACH0C,EAASf,KADN,kBAGmBvB,EAAgBC,EAAMC,GAHzC,OAIoB,aADbJ,EAHP,QAISyC,OACJD,EAASb,EAAc,CAACxB,QAAMC,WAASJ,SAEvCwC,EAASV,EAAc9B,IAP5B,gDAUCwC,EAASV,EAAc,EAAD,KAVvB,yDAAP,mDAAM,GCjEH,SAASY,EAAeC,GAC3B,MAAO,CACHjB,KAAMN,EAAIC,iBACVsB,eAWD,SAASC,EAASC,GACrB,MAAO,CACHnB,KAAMN,EAAII,UACVqB,SAID,SAASC,EAAcC,GAC1B,MAAO,CACHrB,KAAMN,EAAIG,gBACVwB,c,4BC2DOC,MArEf,YAAmE,IAAnDnD,EAAkD,EAAlDA,IAAKoD,EAA6C,EAA7CA,SAAUC,EAAmC,EAAnCA,WAAYH,EAAuB,EAAvBA,WAAYP,EAAW,EAAXA,SAW7CW,EAAa,uCAAG,WAAMC,GAAN,SAAAtD,EAAA,mEAEViD,EAFU,gBAINP,EADAU,GFEWf,EEDatC,EFEjC,CACH6B,KAAMb,EAAKG,gBACXmB,QEFqBD,EAAYrC,IANf,6BASVuD,EAAEC,UATQ,SAUJb,EAASM,GAAc,IAVnB,OAWVM,EAAEE,OAAOC,yBAXC,yDAcdf,EAASI,EAAS,EAAD,KAdH,kCFKnB,IAAwBT,IELL,qBAAH,sDAmCnB,OAAIc,EAEI,yBAAKO,UAAS,QAAWC,IAAK5D,EAAK6D,QAASP,GACxC,yBAAKK,UAAS,iBAAoBG,MAAO,CAACC,gBAAgB,OAAD,OAAS/D,EAAT,QAhB7DkD,EAEI,yBAAKS,UAAW,WACZ,kBAAC,IAAD,CAAMA,UAAWN,EAAa,WAAa,GAAIW,KAAMC,IAAUC,QAIpE,MAgBP,yBAAKP,UAAW,kBACZ,yBAAKA,UAAW,qB,gBC1BbQ,MAnCf,YAA8E,IAArDC,EAAoD,EAApDA,SAAUC,EAA0C,EAA1CA,cAA0C,KAA3B1B,SAA2B,EAAjBgB,kBAAiB,MAAL,GAAK,IAIrCW,cAJqC,mBAIlEC,EAJkE,KAItDC,EAJsD,KAKnEC,EAAYC,mBAASL,EAAe,KAgB1C,OARAM,qBAAU,WACFH,GACAC,MAEL,CAACD,IAKA,yBAAKb,UAAWA,GACXS,EACD,yBAAKQ,IAAKL,MC1Bf,SAASM,EAAIC,EAAIC,GACpB,OAASD,EAAMC,EAAKA,GAAKA,EAQ7B,SAASC,EAAWC,GAChB,OAAOA,EAAIC,MAAM,EAAE,GAAGC,cAAgBF,EAAIC,MAAM,GAAGE,cAShD,SAASC,EAAT,GAAkD,IAA1B/E,EAAyB,EAAzBA,MAAyB,IAAlBC,gBAAkB,MAAP,KAAO,EACpD,MAAO,UAAGA,EAAWyE,EAAWzE,GAAY,GAArC,YAA2CyE,EAAW1E,IAASgF,OASnE,SAASC,EAAeC,GAC3B,OAAO,IAAIC,SAAQ,SAAAC,GACf,IAAMC,EAAM,IAAIC,MAChBD,EAAIE,iBAAiB,OAAQH,GAC7BC,EAAIG,aAAa,MAAON,MA4CzB,SAASO,EAAT,GAAwC,IAAnBzF,EAAkB,EAAlBA,MAAOC,EAAW,EAAXA,SAC/B,OAAOyF,KAAKC,UAAU,CAAC3F,QAAOC,aAoB3B,SAAS2F,EAAWC,EAApB,GAAwD,IAAzB7F,EAAwB,EAAxBA,MAAOC,EAAiB,EAAjBA,SAAUwB,EAAO,EAAPA,KAC7C6B,EAAMmC,EAAW,CAACzF,QAAOC,aACzB6F,EAAUC,oBAAUF,GAM1B,OAFIC,EAAQxC,GAHNA,KAAOwC,EAGM,IAAIE,IAAJ,sBAAYF,EAAQxC,IAApB,YAA6B7B,KAF7B,IAAIuE,IAAIvE,GAIpBqE,EASJ,IAAMG,EAAoBC,mBANjC,SAAoBC,EAAOC,GACvB,OAAOD,EAAME,QAAO,SAAArG,GAAK,OACrB+E,EAAc/E,GAAO8E,cAAcwB,SAASF,EAAStB,qBAIR,6D,OCPrD,IAWeyB,eAXS,SAACC,GAAD,MAAY,CAChCC,SAAUD,EAAM/E,KAChBmB,WAAY4D,EAAME,IAAI9D,cASX2D,EA5Gf,YAAmD,IAAlCE,EAAiC,EAAjCA,SAAUpE,EAAuB,EAAvBA,SAAUO,EAAa,EAAbA,WAI1Bd,EAA0E2E,EAA1E3E,aAAcI,EAA4DuE,EAA5DvE,YAAayE,EAA+CF,EAA/CE,aAAcC,EAAiCH,EAAjCG,oBAAqB1G,EAAYuG,EAAZvG,SAJvB,EAQN2G,mBAAS,IARH,mBAQvCC,EARuC,KAQzBC,EARyB,KAgB9C1C,qBAAU,WACFuC,GACAG,EAAgB,MAErB,CAACH,IASJvC,qBAAU,WACN,IAAI2C,GAAY,EAChB,IACI,IAAMC,EAAkB/E,EAAYmE,QAAO,SAAArE,GAAG,OAAK8E,EAAaR,SAAStE,ODA9E,SAAyBkF,GAC5B,IAAMC,EAAWD,EAAOE,IAAInC,GAC5B,OAAOE,QAAQkC,WAAWF,ICDlBG,CAAgBL,GAAiBM,MAAK,WAC9BP,GACAD,EAAgB,GAAD,mBAAKD,GAAL,YAAsBG,QAG/C,MAAOrF,GACLS,EAASI,EAASb,IAGtB,OAAO,WACHoF,GAAY,KAEjB,CAAC9E,IASJ,IAAM6B,EAAa,uCAAG,kCAAApE,EAAA,kEAEP6H,EAAUtF,EAAVsF,QACHZ,EAHU,gBAIVvE,EAASJ,EAAkB0E,EAAa/B,MAAM4C,EAAQA,EAAStH,KAJrD,gCAMgBwF,KAAK+B,MAAM3F,GAA9B9B,EANG,EAMHA,MAAOC,EANJ,EAMIA,SANJ,SAOJoC,EAASD,EAAcpC,EAAOC,IAP1B,OAQVoC,EAASF,KARC,0DAWdE,EAASI,EAAS,EAAD,KAXH,0DAAH,qDAqBbiF,EAAOxF,EAAYkF,KAAI,SAAA1H,GACzB,IAAMiI,EAAQ,CACVjI,MACA4D,IAAK5D,EACLqD,WAAY4D,EAAaL,SAAS5G,GAClCoD,SAAUgE,EAAaR,SAAS5G,GAChCkD,aACAP,YAEJ,OAAQ,kBAAC,EAAUsF,MAGjBC,EAAsB,CACxBvE,UAAU,UAAD,OAAYT,EAAa,eAAiB,IACnDmB,gBACA1B,WACAyB,SAAU4D,GAGd,OAAQ,kBAAC,EAAmBE,M,gBCOhC,IAaerB,eAbS,SAACC,GAAD,MAAY,CAChCqB,UAAWrB,EAAME,IAAImB,UACrBjB,oBAAqBJ,EAAM/E,KAAKmF,oBAChChE,WAAY4D,EAAME,IAAI9D,cAUX2D,EA9Gf,YAAwE,IAAxDlE,EAAuD,EAAvDA,SAAUwF,EAA6C,EAA7CA,UAAWjF,EAAkC,EAAlCA,WAAYgE,EAAsB,EAAtBA,oBAAsB,EAInCC,oBAAS,GAJ0B,mBAI5DiB,EAJ4D,KAIlDC,EAJkD,OAKrClB,mBAAS,GAL4B,mBAK5DmB,EAL4D,KAKnDC,EALmD,KAanE5D,qBAAU,WACN,IAAM6D,EAAeC,oBAAS,WAC1BF,EAAWG,OAAOJ,WACnB,KAGH,OAFAI,OAAO7C,iBAAiB,SAAU2C,GAE3B,WACHE,OAAOC,oBAAoB,SAAUH,MAE1C,IAQH,IAoCII,EAAY,OAIhB,OAHIN,EAAU,IAAGM,GAAa,WAC1B1F,IAAY0F,GAAa,gBAGzB,oCACI,yBAAKjF,UAAWiF,GAhBlB1F,EAEI,0BAAMS,UAAS,YAAeE,QAAS,kBAAMlB,EAASM,GAAc,MAC/D,kBAAC,IAAD,CAAMe,KAAMC,IAAU4E,gBAI5B,KAWG,0BAAMlF,UAAS,YAAeE,QAAS,kBAAMwE,GAAaD,KACvD,kBAAC,IAAD,CAAMpE,KAAMC,IAAU6E,SA5B7BV,EAEI,yBAAKzE,UAAW,oBAAqBE,QAAS,kBAAMwE,GAAY,MAGjE,KA2BH,kBAACU,EAAA,EAAD,CAAeC,GAAIZ,EAAUa,eAAa,EAACC,cAAY,EAACC,WAAW,SAASC,QAAS,KACjF,6BACI,4BACI,wBAAIzF,UAAWuD,EAAsB,YAAc,IAC/C,kBAAC,IAAD,CAAMlD,KAAMC,IAAUC,OACtB,kBAAC,IAAD,CAAQmF,QAASnC,EAAqBoC,SAtDvC,WACnB,IACI3G,EAASE,GAAe,IACxBF,EAASM,GAAc,IACvBN,GNbwB4G,GMaMrC,ENZ/B,CACHrF,KAAMb,EAAKI,mBACXmI,sBMWIlB,GAAY,GACd,MAAOnG,GACLS,EAASI,EAASb,INhBvB,IAA6BqH,MMiEZ,4BACI,kBAAC,IAAD,CAAMvF,KAAMC,IAAUuF,OACtB,kBAAC,IAAD,CAAQH,QAASlB,EAAWmB,SAAU,kBAAM3G,ELxGjE,SAAsBwF,GACzB,MAAO,CACHtG,KAAMN,EAAIE,eACV0G,aKqGyEsB,EAActB,e,gDCvEhFuB,G,mBAlCX,WAAYzB,GAAQ,IAAD,8BACf,4CAAMA,KACDnB,MAAQ,CAAC6C,UAAU,GAFT,E,+EAUD3G,EAAO4G,GACrBC,KAAK5B,MAAMtF,SAASI,EAAS,CAACC,QAAM4G,iB,+BAIpC,OAAIC,KAAK/C,MAAM6C,UAAYE,KAAK5B,MAAM0B,SAE9B,0BAAMhG,UAAW,kBACb,yBAAKA,UAAW,WACZ,kBAAC,IAAD,CAAMK,KAAMC,IAAU6F,MAAOC,OAAQC,IAAOC,SAC5C,4DACA,yDAKTJ,KAAK5B,MAAM7D,Y,gDArBUpB,GAE5B,MAAO,CAAE2G,UAAU,O,GARCO,IAAMC,Y,OCgQnBC,OAlPf,YAAmF,IAAlE3D,EAAiE,EAAjEA,MAAO4D,EAA0D,EAA1DA,kBAAmBC,EAAuC,EAAvCA,cAAexH,EAAwB,EAAxBA,YAAaH,EAAW,EAAXA,SAK7D4H,EAAW7J,OAAOC,OAAO,CAC3B6J,GAAI,GACJC,KAAM,GACNC,MAAO,KAELC,EAAWC,iBAAO,MAVsD,EAc9CzD,mBAAS,IAdqC,mBAcvET,EAduE,KAc7DmE,EAd6D,OAexC1D,oBAAS,GAf+B,mBAevE2D,EAfuE,KAe1DC,EAf0D,OAgBpC5D,mBAAS,IAhB2B,mBAgBvE6D,EAhBuE,KAgBxDC,EAhBwD,OAiBpC9D,mBAAS,GAjB2B,mBAiBvE+D,EAjBuE,KAiBxDC,EAjBwD,OAkBxChE,mBAdV,oBAJkD,mBAkBvEiE,EAlBuE,KAkB1DC,EAlB0D,KAsBxEC,EAAqBV,iBAAO,MAC5BW,EAAgBX,iBAAO,MAQ7BjG,qBAAU,WACN,IAAK,IACM6G,EAAWD,EAAXC,QACHA,GAASA,EAAQ9H,wBAAuB,GAC9C,MAAOxB,GACLS,EAASI,EAASb,OAEvB,CAACgJ,IAOJvG,qBAAU,WACN,IAAM8G,EAAc,SAAAlI,GACX+H,EAAmBE,QAAQE,SAASnI,EAAEE,SACvCsH,GAAe,IAKvB,OAFAY,SAAS9F,iBAAiB,YAAa4F,GAEhC,WACHE,SAAShD,oBAAoB,YAAa8C,MAE/C,IAMH9G,qBAAU,WACN,IACIsG,EAAiBxE,GACnB,MAAOvE,GACLS,EAASI,EAASb,OAEvB,CAACuE,IAMJ9B,qBAAU,WACN,IAAMqG,EAAgBzE,EAAkBE,EAAMC,GAC9CuE,EAAiBD,KAClB,CAACtE,IAMJ/B,qBAAU,WACDmG,GAAaO,EAhFM,sBAiFzB,CAACP,IASJ,IAcMxH,EAAgB,WAClB,IACIuH,EAAY,IACZF,EAASa,QAAQI,QACnB,MAAO1J,GACLS,EAASI,EAASb,MASpB2J,EAAe,SAAAjI,GACjB,IACI,IAAMtD,EJjDX,SAAoBsD,GACvB,OAAOoC,KAAK+B,MAAMnE,GIgDIkI,CAAWlI,GACzBiH,EAAYxF,EAAc/E,IAC1ByK,GAAe,GACfV,EAAkB/J,GAClB6K,EAAiB,GACnB,MAAOjJ,GACLS,EAASI,EAASb,MAmF1B,OACI,yBACIyB,UAAW,mBACXG,MAAO,CAAC,MAAUhB,EAAc,MAAQ,OACxC8B,IAAK0G,GACL,kBAAC,IAAD,CAAM3H,UAAU,aAAaK,KAAMC,IAAU8H,SAf7CrF,EAEI,0BAAM7C,QAASP,GACT,kBAAC,IAAD,CAAMK,UAAW,YAAaK,KAAMC,IAAU+H,eAIrD,KAUH,2BACInK,KAAK,OACL8B,WAAYmH,EAAc,QAAU,KAAOA,GAAeE,EAAclD,OAAS,YAAc,IAC/FmE,MAAOvF,EACPwF,YAAY,EACZC,QAtFU,SAAA5I,GAClB,IAAK,IAEG6I,EADGtE,EAAUkD,EAAVlD,OAEP,OAAOvE,EAAE8I,SACL,KAAK9B,EAASE,KACV2B,EAAWvH,EAAIqG,EAAgB,EAAGpD,GAClCqD,EAAiBiB,GACjBf,EAAehG,EAAc2F,EAAcoB,KAC3C,MACJ,KAAK7B,EAASC,GACV4B,EAAWvH,EAAIqG,EAAgB,EAAGpD,GAClCqD,EAAiBiB,GACjBf,EAAehG,EAAc2F,EAAcoB,KAC3C,MACJ,KAAK7B,EAASG,MACV,IAAM4B,EAAOtB,EAAcE,GAC3BoB,GAAQT,EAAa9F,EAAWuG,KAK1C,MAAOpK,GACLS,EAASI,EAASb,MAgEdoH,SApIW,SAAA/F,GACnB,IACIsH,EAAYtH,EAAEE,OAAOwI,OACrBlB,GAAe,GACVxH,EAAEE,OAAOwI,OAAOZ,EA9FD,oBA+FtB,MAAOnJ,GACLS,EAASI,EAASb,MA+HdkJ,YAAaA,EACbmB,QAASjC,EACT1F,IAAK+F,IA1DK,WAClB,GAAIG,GAAeE,EAAclD,OAAQ,CACrC,IAAM0E,EAAUxB,EAActD,KAAI,SAACpH,EAAMmM,GACrC,IAAMC,EAAM3G,EAAWzF,GACjBqM,EAAQtH,EAAc/E,GACtB2H,EAAQ,CACVtE,UAAW,SACXC,IAAK8I,EACL,aAAcA,GAMlB,OAJID,IAAMvB,IACNjD,EAAMtE,WAAa,YACnBsE,EAAMrD,IAAM2G,GAER,yCAAStD,EAAT,CAAgBpE,QAAS,SAAAN,GAAC,OAAIsI,EAAatI,EAAEE,OAAOmJ,QAAQX,UAASU,MAEjF,OACI,yBAAKhJ,UAAW,qBACZ,yBAAKA,UAAU,WACV6I,IAKjB,OAAO,KAmCFK,KClPb,SAAS/K,GAAc3B,GACnB,MAAO,CACH0B,KAAMd,EAAaF,QACnBiM,OAAQ3M,EAAI6B,SAIpB,SAASC,GAAcC,GACnB,MAAO,CACHL,KAAMd,EAAaD,QACnBoB,O,cCmIR,IAMe2E,gBANS,SAACC,GAAD,MAAY,CAChCC,SAAUD,EAAM/E,KAChB+K,OAAQhG,EAAMgG,OAAOA,OACrBC,SAAUjG,EAAME,OAGLH,EAhIf,YAAsD,IAAxCkG,EAAuC,EAAvCA,SAAUhG,EAA6B,EAA7BA,SAAU+F,EAAmB,EAAnBA,OAAQnK,EAAW,EAAXA,SAI/BG,EAAgDiK,EAAhDjK,YAAaqF,EAAmC4E,EAAnC5E,UAAWjF,EAAwB6J,EAAxB7J,WAAYyG,EAAYoD,EAAZpD,SACpC5H,EAAwDgF,EAAxDhF,KAAMK,EAAkD2E,EAAlD3E,aAAc8E,EAAoCH,EAApCG,oBAAqB1E,EAAeuE,EAAfvE,YAQhDmC,qBAAU,WACN,IACIhC,EDnBR,uCAAO,WAAOA,GAAP,eAAA1C,EAAA,6DACH0C,EArBG,CACHd,KAAMd,EAAaH,UAmBhB,kBXYAb,EADK,uCWXL,OAIoB,aADbI,EAHP,QAISyC,OACJD,EAASb,GAAc3B,IAEvBwC,EAASV,GAAc9B,IAP5B,gDAUCwC,EAASV,GAAc,EAAD,KAVvB,yDAAP,mDAAM,ICoBA,MAAOC,GACLS,EAASI,EAASb,OAEvB,IAMHyC,qBAAU,WAEFgH,SAASqB,cAAc,QAAQrJ,UAD/BwE,EAC2C,OAGJ,UAC5C,CAACA,IAWJ,IAAMkC,EAAiB,uCAAG,iCAAApK,EAAA,yDAAQK,EAAR,EAAQA,MAAMC,EAAd,EAAcA,SAAd,UAEZqD,EAAMmC,EAAW,CAACzF,QAAMC,gBACjBwB,EAHK,gCAIRY,EAASD,EAAcpC,EAAOC,IAJtB,uBAMZoC,EAASR,EAAgByB,IANb,OAOlBjB,EAASF,KAPS,kDASlBE,EAASI,EAAS,EAAD,KATC,0DAAH,sDA+BjBkK,EAAYC,mBAAQ,WACtB,OAAI9K,GAAgBL,EAAKK,IAAiBL,EAAKK,GAAc+K,KACjD,kBAAC,EAAD,MAEL,OACR,CAACpL,EAAMK,IAQJgL,EACJ,yBAAKzJ,UAAW,gBACZ,+CACA,kBAAC,IAAD,CAAMK,KAAMC,IAAUoJ,aACtB,6DAIAC,EAAc,CAChB7G,MAAOqG,EACPzC,oBACAC,cAtCkB,WAClB,IACI3H,EAASE,GAAe,IAC1B,MAAOX,GACLS,EAASI,EAASb,MAmCtBY,cACAH,YAGJ,OACI,kBAAC,EAAD,CAAeA,SAAUA,EAAUgH,SAAUA,GACzC,0BAAMhG,UAAWT,EAAa,cAAgB,IAC1C,yBAAKS,UAAS,0BAAqBb,EAAc,eAAiB,KAC9D,kBAAC,GAAWwK,IAEdpG,IAAwB1E,EAAYsF,OAAUsF,EAAcH,GAElE,kBAAC,EAAD,U,qCCvINM,GAAgB,CAClBC,YAAY,EACZzL,KAAM,GACNvB,SAAU,EACV4B,aAAc,KACdI,YAAa,GACbyE,aAAc,GACdC,qBAAqB,EACrBhF,IAAK,MCTHqL,GAAgB,CAClBC,YAAY,EACZV,OAAQ,GACR5K,IAAK,MAUT,SAASuL,GAAaX,GAClB,IAAMY,EAAS,GAQf,OAPAhN,OAAOiN,QAAQb,GAAQc,SAAQ,YAAwB,IAAD,mBAArBtN,EAAqB,KAAfuN,EAAe,KAC9CA,EAAU/F,OACV+F,EAAUD,SAAQ,SAAArN,GAAQ,OAAImN,EAAOI,KAAK,CAACxN,QAAOC,gBAElDmN,EAAOI,KAAK,CAACxN,QAAOC,SAAU,UAG/BmN,EAGI,ICzBTH,GAAgB,CAClBzK,aAAa,EACbqF,WAAW,EACXjF,YAAY,EACZyG,UAAU,EACV3G,MAAO,MCFI+K,gBAAgB,CAAChM,KHSjB,WAAwC,IAAvCiM,EAAsC,uDAA1BT,GAAeU,EAAW,uCAC7ClM,EAA2DiM,EAA3DjM,KAAMvB,EAAqDwN,EAArDxN,SAAU4B,EAA2C4L,EAA3C5L,aAAcI,EAA6BwL,EAA7BxL,YAAayE,EAAgB+G,EAAhB/G,aAChD,OAAOgH,EAAOpM,MACV,KAAKpB,EAAWG,QACZ,OAAO,gBACAoN,EADP,CAEIR,YAAY,EACZtL,IAAK,OAEb,KAAKzB,EAAWI,QAEZ,OADAkB,EAAOmE,EAAW8H,EAAUjM,KAAMkM,GAC3B,gBACAD,EADP,CAEIR,YAAY,EACZzL,OACAG,IAAK,OAEb,KAAKzB,EAAWK,QACZ,OAAO,gBACAkN,EADP,CAEIR,YAAY,EACZtL,IAAK+L,EAAO/L,MAEpB,KAAKlB,EAAKC,kBACN,OAAO,gBACA+M,EADP,CAEI5L,aAAc6L,EAAO7L,aACrB8E,qBAAqB,IAE7B,KAAKlG,EAAKM,qBACN,OAAO,gBACA0M,EADP,CAEIxL,YAAa0L,MAAMC,KAAKpM,EAAKK,KAAkB,KAEvD,KAAKpB,EAAKK,oBACN,OAAO,gBACA2M,EADP,CAEIxL,YAAY,GAAD,mBAAMA,GAAN,YAAsByL,EAAOzL,gBAEhD,KAAKxB,EAAKE,aACN,OAAO,gBACA8M,EADP,CAEI/G,aAAa,GAAD,mBAAMA,GAAN,CAAoBgH,EAAO3L,QAE/C,KAAKtB,EAAKG,gBACN,IAAMiN,EAAe,YAAOnH,GACtBoH,EAAQD,EAAgBE,WAAU,SAAA5B,GAAG,OAAIA,IAAQuB,EAAO3L,OAI9D,OAHI+L,GAAS,GACTD,EAAgBG,OAAOF,EAAM,GAE1B,gBACAL,EADP,CAEI/G,aAAcmH,IAEtB,KAAKpN,EAAKI,mBACN,OAAI6M,EAAO1E,iBACA,gBACAyE,EADP,CAEI9G,qBAAqB,EACrB1E,YAAayE,EAAa/B,MAAM,EAAE1E,MAG1CgC,EAAc,GACVJ,GAAgBL,EAAKK,KACrBI,EAAc0L,MAAMC,KAAKpM,EAAKK,IAAe8C,MAAM,EAAE1E,IAElD,gBACAwN,EADP,CAEI9G,qBAAqB,EACrB1E,iBAER,QACI,OAAOwL,IGjFmBlB,OFsBvB,WAAwC,IAAvCkB,EAAsC,uDAA1BT,GAAeU,EAAW,uCAClD,OAAOA,EAAOpM,MACV,KAAKd,EAAaH,QACd,OAAO,gBACAoN,EADP,CAEIR,YAAY,EACZV,OAAQ,GACR5K,IAAK,OAEb,KAAKnB,EAAaF,QACd,IAAMiM,EAASW,GAAaQ,EAAOnB,QACnC,OAAO,gBACAkB,EADP,CAEIR,YAAY,EACZV,SACA5K,IAAK,OAEb,KAAKnB,EAAaD,QACd,OAAO,gBACAkN,EADP,CAEIR,YAAY,EACZV,OAAQ,GACR5K,IAAK+L,EAAO/L,MAEpB,QACI,OAAO8L,IE/C2BhH,IDK/B,WAAwC,IAAvCgH,EAAsC,uDAA1BT,GAAeU,EAAW,uCAClD,OAAOA,EAAOpM,MACV,KAAKN,EAAIC,iBACL,OAAO,gBACAwM,EADP,CAEIlL,YAAamL,EAAOnL,cAE5B,KAAKvB,EAAIE,eACL,OAAO,gBACAuM,EADP,CAEI7F,UAAW8F,EAAO9F,YAE1B,KAAK5G,EAAIG,gBACL,OAAO,gBACAsM,EADP,CAEI9K,WAAY+K,EAAO/K,aAE3B,KAAK3B,EAAII,UACL,OAAO,gBACAqM,EADP,CAEIrE,UAAU,EACV3G,MAAOiL,EAAOjL,QAEtB,QACI,OAAOgL,M,SE5BbQ,GAAaC,aAAgBC,KAAQC,MAE5BC,gBAAYC,GAAcL,ICDzCM,IAASC,OAAO,kBAAC,IAAD,CAAUC,MAAOA,IAAO,kBAAC,GAAD,OAAmBrD,SAASsD,eAAe,W","file":"static/js/main.7dc87771.chunk.js","sourcesContent":["/**\r\n * @param url - the url to fetch\r\n * @returns {Promise<any>}\r\n * @desc A utility function for fetching the JSON\r\n * response from an endpoint.\r\n */\r\nasync function getJSON(url) {\r\n    try {\r\n        const res = await fetch(url);\r\n        return await res.json();\r\n    } catch (e) {\r\n        throw e;\r\n    }\r\n}\r\n\r\n/**\r\n * @param breed\r\n * @param subBreed\r\n * @param pageSize\r\n * @returns {Promise<any>}\r\n * @desc Makes a request to the Dogs API by breed and sub-breed.\r\n * Dogs API: https://dog.ceo/dog-api/documentation/\r\n */\r\nexport function fetchRandomDogs(breed, subBreed = null, pageSize = 9) {\r\n    let url = `https://dog.ceo/api/breed/${breed}/`;\r\n    if (subBreed) url += `${subBreed}/`;\r\n    url += `images/random/${pageSize}`;\r\n    return getJSON(url);\r\n}\r\n\r\n/**\r\n * @returns {Promise<any>}\r\n * @desc Makes a request to the Dogs API for the list of breeds.\r\n */\r\nexport function fetchBreeds() {\r\n    const url = \"https://dog.ceo/api/breeds/list/all\";\r\n    return getJSON(url);\r\n}","export const FETCH_DOGS = Object.freeze({\r\n    INITIAL: \"FETCH_DOGS_INITIAL\",\r\n    SUCCESS: \"FETCH_DOGS_SUCCESS\",\r\n    FAILURE: \"FETCH_DOGS_FAILURE\"\r\n});\r\n\r\nexport const FETCH_BREEDS = Object.freeze({\r\n    INITIAL: \"FETCH_BREEDS_INITIAL\",\r\n    SUCCESS: \"FETCH_BREEDS_SUCCESS\",\r\n    FAILURE: \"FETCH_BREEDS_FAILURE\"\r\n});\r\n\r\nexport const DOGS = Object.freeze({\r\n    SET_CURRENT_BREED: \"DOGS_SET_CURRENT_BREED\",\r\n    ADD_FAVORITE: \"DOGS_ADD_FAVORITE\",\r\n    REMOVE_FAVORITE: \"DOGS_REMOVE_FAVORITE\",\r\n    SET_SHOW_FAVORITES: \"DOGS_SET_SHOW_FAVORITES\",\r\n    APPEND_CURRENT_DOGS: \"DOGS_APPEND_CURRENT_DOGS\",\r\n    REFRESH_CURRENT_DOGS: \"REFRESH_CURRENT_DOGS\"\r\n});\r\n\r\nexport const APP = Object.freeze({\r\n    SET_FIRST_SEARCH: \"APP_SET_FIRST_SEARCH\",\r\n    SET_DARK_THEME: \"APP_SET_DARK_THEME\",\r\n    SET_SINGLE_VIEW: \"APP_SET_SINGLE_VIEW\",\r\n    SET_ERROR: \"APP_SET_ERROR\"\r\n});","import {fetchRandomDogs} from \"../../api\";\r\nimport {DOGS, FETCH_DOGS} from \"./actionTypes\";\r\n\r\nfunction initialAction() {\r\n    return {\r\n        type: FETCH_DOGS.INITIAL\r\n    }\r\n}\r\n\r\nfunction successAction({breed,subBreed,res}) {\r\n    return {\r\n        type: FETCH_DOGS.SUCCESS,\r\n        breed,\r\n        subBreed,\r\n        dogs: res.message\r\n    }\r\n}\r\n\r\nfunction failureAction(err) {\r\n    return {\r\n        type: FETCH_DOGS.FAILURE,\r\n        err\r\n    }\r\n}\r\n\r\nexport function setCurrentBreed(currentBreed) {\r\n    return {\r\n        type: DOGS.SET_CURRENT_BREED,\r\n        currentBreed\r\n    };\r\n}\r\n\r\nexport function removeFavorite(dog) {\r\n    return {\r\n        type: DOGS.REMOVE_FAVORITE,\r\n        dog\r\n    };\r\n}\r\n\r\nexport function addFavorite(dog) {\r\n    return {\r\n        type: DOGS.ADD_FAVORITE,\r\n        dog\r\n    };\r\n}\r\n\r\nexport function setShowFavoriteDogs(showFavoriteDogs) {\r\n    return {\r\n        type: DOGS.SET_SHOW_FAVORITES,\r\n        showFavoriteDogs\r\n    };\r\n}\r\n\r\nexport function appendCurrentDogs(currentDogs) {\r\n    return {\r\n        type: DOGS.APPEND_CURRENT_DOGS,\r\n        currentDogs\r\n    }\r\n}\r\n\r\nexport function refreshCurrentDogs() {\r\n    return {\r\n        type: DOGS.REFRESH_CURRENT_DOGS\r\n    }\r\n}\r\n\r\nexport function getRandomDogs(breed, subBreed=null) {\r\n    return async (dispatch) => {\r\n        dispatch(initialAction());\r\n        try {\r\n            const res = await fetchRandomDogs(breed,subBreed);\r\n            if (res.status === \"success\") {\r\n                dispatch(successAction({breed,subBreed,res}));\r\n            } else {\r\n                dispatch(failureAction(res));\r\n            }\r\n        } catch (e) {\r\n            dispatch(failureAction(e))\r\n        }\r\n    };\r\n}","import {APP} from \"./actionTypes\";\r\n\r\nexport function setFirstSearch(firstSearch) {\r\n    return {\r\n        type: APP.SET_FIRST_SEARCH,\r\n        firstSearch\r\n    };\r\n}\r\n\r\nexport function setDarkTheme(darkTheme) {\r\n    return {\r\n        type: APP.SET_DARK_THEME,\r\n        darkTheme\r\n    };\r\n}\r\n\r\nexport function setError(error) {\r\n    return {\r\n        type: APP.SET_ERROR,\r\n        error\r\n    }\r\n}\r\n\r\nexport function setSingleView(singleView) {\r\n    return {\r\n        type: APP.SET_SINGLE_VIEW,\r\n        singleView\r\n    };\r\n}","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {addFavorite, removeFavorite} from \"../../../redux/actions/dogs\";\r\nimport {setSingleView, setError} from \"../../../redux/actions/app\";\r\nimport {Icon} from \"@blueprintjs/core\";\r\nimport {IconNames} from \"@blueprintjs/icons\";\r\nimport './photo.scss';\r\n\r\n/**\r\n * @param url - the image to display\r\n * @param isLoaded - whether the image has finished loading\r\n * @param isFavorite - whether the image is currently a favorite image\r\n * @param singleView - whether the app state is in single view\r\n * @param dispatch\r\n * @desc A photo component\r\n */\r\nfunction Photo({url, isLoaded, isFavorite, singleView, dispatch}) {\r\n\r\n    // HANDLERS --------------------------------------------------------------------------------------------------------\r\n\r\n    /**\r\n     * @param e\r\n     * @desc A click handler for a photo.\r\n     * If the app is in single view, clicking\r\n     * on a photo initiates favoriting, else\r\n     * it sets single view to true.\r\n     */\r\n    const handleOnClick = async e => {\r\n        try {\r\n            if (singleView) {\r\n                if (isFavorite) {\r\n                    dispatch(removeFavorite(url));\r\n                } else {\r\n                    dispatch(addFavorite(url));\r\n                }\r\n            } else {\r\n                e.persist();\r\n                await dispatch(setSingleView(true));\r\n                e.target.scrollIntoViewIfNeeded();\r\n            }\r\n        } catch (err) {\r\n            dispatch(setError(err));\r\n        }\r\n\r\n    };\r\n\r\n    // COMPONENTS ------------------------------------------------------------------------------------------------------\r\n\r\n    const renderFavoriteButton = () => {\r\n        if (singleView) {\r\n            return (\r\n                <div className={\"buttons\"}>\r\n                    <Icon className={isFavorite ? \"favorite\" : \"\"} icon={IconNames.STAR}/>\r\n                </div>\r\n            );\r\n        }\r\n        return null;\r\n    };\r\n\r\n    /**\r\n     * @desc Until the photo finished loading, render a default background.\r\n     */\r\n    if (isLoaded) {\r\n        return  (\r\n            <div className={`photo`} key={url} onClick={handleOnClick}>\r\n                <div className={`card-container`} style={{backgroundImage: `url(${url})`}}/>\r\n                {renderFavoriteButton()}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={\"photo inactive\"}>\r\n            <div className={\"card-container\"}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nPhoto.propTypes = {\r\n    url: PropTypes.string,\r\n    isLoaded: PropTypes.bool,\r\n    isFavorite: PropTypes.bool,\r\n    dispatch: PropTypes.func\r\n};\r\n\r\nexport default Photo;","import React, {useEffect} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {useInView} from 'react-intersection-observer';\r\nimport {debounce} from \"lodash\";\r\n\r\n/**\r\n * @param children\r\n * @param handleLastRow {function} - handler to call on last row\r\n * @param dispatch\r\n * @param className {string?}\r\n * @desc An infinite scrolling wrapper component.\r\n */\r\nfunction InfiniteScroll({children, handleLastRow, dispatch, className = ''}) {\r\n\r\n    // CONSTANTS -------------------------------------------------------------------------------------------------------\r\n\r\n    const [lastRowRef, lastRowInView] = useInView();\r\n    const onLastRow = debounce(handleLastRow, 250);\r\n\r\n    // SIDE EFFECTS ----------------------------------------------------------------------------------------------------\r\n\r\n    /**\r\n     * @desc Whenever the last row is in view,\r\n     * call the debounced last row handler.\r\n     */\r\n    useEffect(() => {\r\n        if (lastRowInView) {\r\n            onLastRow();\r\n        }\r\n    }, [lastRowInView]);\r\n\r\n    // COMPONENTS ------------------------------------------------------------------------------------------------------\r\n\r\n    return (\r\n        <div className={className}>\r\n            {children}\r\n            <div ref={lastRowRef}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nInfiniteScroll.propTypes = {\r\n    handleLastRow: PropTypes.func,\r\n    className: PropTypes.string,\r\n    dispatch: PropTypes.func\r\n};\r\n\r\nexport default InfiniteScroll;","import {cloneDeep, random, difference, memoize} from \"lodash\";\r\n\r\n/**\r\n * @param num\r\n * @param n\r\n * @returns {number}\r\n * @desc Javascript's native modulo does\r\n * not work as expected for negative numbers.\r\n * This is a work-around.\r\n */\r\nexport function mod(num,n) {\r\n    return ((num % n) + n) % n;\r\n}\r\n\r\n/**\r\n * @param str\r\n * @returns {string}\r\n * @desc Capitalize a single word.\r\n */\r\nfunction capitalize(str) {\r\n    return str.slice(0,1).toUpperCase() + str.slice(1).toLowerCase();\r\n}\r\n\r\n/**\r\n * @param breed\r\n * @param subBreed\r\n * @returns {string}\r\n * @desc Prettify a breed for display.\r\n */\r\nexport function prettifyBreed({breed, subBreed = null}) {\r\n    return `${subBreed ? capitalize(subBreed) : \"\"} ${capitalize(breed)}`.trim();\r\n}\r\n\r\n/**\r\n * @param src\r\n * @returns {Promise<unknown>}\r\n * @desc Promisify an image src which\r\n * resolves when the image has loaded.\r\n */\r\nexport function promisifyImage(src) {\r\n    return new Promise(resolve => {\r\n        const img = new Image();\r\n        img.addEventListener(\"load\", resolve);\r\n        img.setAttribute(\"src\", src);\r\n    });\r\n}\r\n\r\n/**\r\n * @param photos\r\n * @desc Promisify a list of photos which\r\n * resolves when all of the photos have settled\r\n * (rejected or resolved).\r\n */\r\nexport function promisifyPhotos(photos) {\r\n    const promises = photos.map(promisifyImage);\r\n    return Promise.allSettled(promises);\r\n}\r\n\r\n/**\r\n * @param n {int} - the amount of random dogs to generate\r\n * @param dogs {string[]} - the original dog array\r\n * @param prev {string[]} - the previous array of dogs\r\n * @desc Generate n more unique random dogs that do not\r\n * exists in the previous array of dogs.\r\n */\r\nexport function randomDogs(n, dogs, prev=[]) { // not using anymore\r\n    const diff = difference(dogs, prev);\r\n    const result = [...prev];\r\n    while(n > 0) {\r\n        if (diff.length === 0) break;\r\n        const randIndex = random(0,diff.length-1);\r\n        const randValue = diff.splice(randIndex, 1);\r\n        if (randValue.length) {\r\n            result.push(randValue[0]);\r\n            n--;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n/**\r\n * @param breed\r\n * @param subBreed\r\n * @desc Use this function to convert a\r\n * breed into a key. Ensures the same key is\r\n * used throughout the app.\r\n */\r\nexport function breedToKey({breed, subBreed}) {\r\n    return JSON.stringify({breed, subBreed});\r\n}\r\n\r\n/**\r\n * @param key {string}\r\n * @desc Use this function to convert a key\r\n * to a breed.\r\n */\r\nexport function keyToBreed(key) {\r\n    return JSON.parse(key);\r\n}\r\n\r\n/**\r\n * @param prevDogs\r\n * @param breed\r\n * @param subBreed\r\n * @param dogs\r\n * @desc Update a previous dog object with a new\r\n * dog object. A set is used to ensure uniqueness.\r\n */\r\nexport function updateDogs(prevDogs, {breed, subBreed, dogs}) {\r\n    const key = breedToKey({breed, subBreed});\r\n    const newDogs = cloneDeep(prevDogs);\r\n    if (!(key in newDogs)) {\r\n        newDogs[key] = new Set(dogs);\r\n    } else {\r\n        newDogs[key] = new Set([...newDogs[key], ...dogs]);\r\n    }\r\n    return newDogs;\r\n}\r\n\r\nfunction filterList(items, inputVal) {\r\n    return items.filter(breed => // substring match\r\n        prettifyBreed(breed).toLowerCase().includes(inputVal.toLowerCase())\r\n    );\r\n}\r\n\r\nexport const memoizeFilterList = memoize(filterList, (...args) => args[1]);\r\n\r\n\r\n\r\n","import React, {useEffect, useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\nimport Photo from \"../../non-connected/photo/photo\";\r\nimport InfiniteScroll from \"../../non-connected/infinite-scroll/infinite-scroll\";\r\nimport {getRandomDogs, appendCurrentDogs, refreshCurrentDogs} from \"../../../redux/actions/dogs\";\r\nimport {setError} from \"../../../redux/actions/app\";\r\nimport {promisifyPhotos} from \"../../../util/util\";\r\nimport './photos.scss';\r\n\r\n/**\r\n * @param dogState\r\n * @param dispatch\r\n * @param singleView - whether the current app state is in single view\r\n * @desc Photos is a connected component for displaying\r\n * the current dogs from the dog state as photos.\r\n *\r\n * Features:\r\n *  - maintains a loaded photos state so that each page is loaded simultaneously\r\n *  - renders dog photos with infinite scrolling\r\n */\r\nfunction Photos({dogState, dispatch, singleView}) {\r\n\r\n    // CONSTANTS -------------------------------------------------------------------------------------------------------\r\n\r\n    const {currentBreed, currentDogs, favoriteDogs, showingFavoriteDogs, pageSize} = dogState;\r\n\r\n    // COMPONENT STATE -------------------------------------------------------------------------------------------------\r\n\r\n    const [loadedPhotos, setLoadedPhotos] = useState([]);\r\n\r\n    // SIDE EFFECTS ----------------------------------------------------------------------------------------------------\r\n\r\n    /**\r\n     * @desc Whenever the app state for showing favorite\r\n     * dogs changes and if it is true, clear the loaded photos.\r\n     */\r\n    useEffect(() => {\r\n        if (showingFavoriteDogs) {\r\n            setLoadedPhotos([]); // reset\r\n        }\r\n    }, [showingFavoriteDogs]);\r\n\r\n    /**\r\n     * @desc Whenever current dogs changes,\r\n     * wait for all of the not yet loaded\r\n     * dog photos to load, then update the\r\n     * loaded photos state with all of the\r\n     * dogs simultaneously.\r\n     */\r\n    useEffect(() => {\r\n        let isMounted = true;\r\n        try {\r\n            const notLoadedPhotos = currentDogs.filter(dog => !loadedPhotos.includes(dog));\r\n            promisifyPhotos(notLoadedPhotos).then(() => {\r\n                if (isMounted) {\r\n                    setLoadedPhotos([...loadedPhotos, ...notLoadedPhotos]);\r\n                }\r\n            });\r\n        } catch (err) {\r\n            dispatch(setError(err));\r\n        }\r\n\r\n        return () => {\r\n            isMounted = false;\r\n        }\r\n    }, [currentDogs]);\r\n\r\n    // HANDLERS --------------------------------------------------------------------------------------------------------\r\n\r\n    /**\r\n     * @desc A handler to call when the last\r\n     * row inside of an infinite scroll is\r\n     * in view.\r\n     */\r\n    const handleLastRow = async () => {\r\n        try {\r\n            const {length} = currentDogs;\r\n            if (showingFavoriteDogs) {\r\n                dispatch(appendCurrentDogs(favoriteDogs.slice(length, length + pageSize)));\r\n            } else {\r\n                const {breed, subBreed} = JSON.parse(currentBreed);\r\n                await dispatch(getRandomDogs(breed, subBreed));\r\n                dispatch(refreshCurrentDogs());\r\n            }\r\n        } catch (err) {\r\n            dispatch(setError(err));\r\n        }\r\n    };\r\n\r\n    // COMPONENTS ------------------------------------------------------------------------------------------------------\r\n\r\n    /**\r\n     * @desc Prepares a list of dog photos to be rendered\r\n     * inside of an infinite scrolling component.\r\n     */\r\n    const rows = currentDogs.map(url => {\r\n        const props = {\r\n            url,\r\n            key: url,\r\n            isFavorite: favoriteDogs.includes(url),\r\n            isLoaded: loadedPhotos.includes(url),\r\n            singleView,\r\n            dispatch\r\n        };\r\n        return (<Photo {...props}/>);\r\n    });\r\n\r\n    const infiniteScrollProps = {\r\n        className: `photos ${singleView ? \" single-view\" : \"\"}`,\r\n        handleLastRow,\r\n        dispatch,\r\n        children: rows\r\n    };\r\n\r\n    return (<InfiniteScroll {...infiniteScrollProps}/>);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    dogState: state.dogs,\r\n    singleView: state.app.singleView\r\n});\r\n\r\nPhotos.propTypes = {\r\n    dogState: PropTypes.object,\r\n    dispatch: PropTypes.func,\r\n    singleView: PropTypes.bool\r\n};\r\n\r\nexport default connect(mapStateToProps)(Photos);\r\n\r\n","import React, {useState, useEffect} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Icon, Switch } from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport {setShowFavoriteDogs} from \"../../../redux/actions/dogs\";\r\nimport {setFirstSearch, setSingleView, setError} from \"../../../redux/actions/app\";\r\nimport {connect} from \"react-redux\";\r\nimport {throttle} from \"lodash\";\r\nimport {setDarkTheme} from \"../../../redux/actions/app\";\r\nimport './menu.scss';\r\n\r\n/**\r\n * @param dispatch - used to dispatch actions to redux store\r\n * @param darkTheme - whether the current theme is dark\r\n * @param singleView - whether the current app state is in single view\r\n * @param showingFavoriteDogs - whether the app is currently showing favorite dogs\r\n * @desc The menu component opens and close a menu for the entire app.\r\n *\r\n * Features:\r\n *  - backdrop filter if vertical scroll position greater than zero\r\n *  - open & close dialog animation\r\n *  - slider for switching theme\r\n *  - button for showing favorite dogs\r\n */\r\nfunction Menu ({dispatch, darkTheme, singleView, showingFavoriteDogs}) {\r\n\r\n    // COMPONENT STATE -------------------------------------------------------------------------------------------------\r\n\r\n    const [menuOpen, setMenuOpen] = useState(false);\r\n    const [scrollY, setScrollY] = useState(0);\r\n\r\n    // SIDE EFFECTS ----------------------------------------------------------------------------------------------------\r\n\r\n    /**\r\n     * @desc Registers an event listener on the window's\r\n     * vertical scroll position.\r\n     */\r\n    useEffect(() => {\r\n        const updateScroll = throttle(() => {\r\n            setScrollY(window.scrollY);\r\n        }, 100);\r\n        window.addEventListener(\"scroll\", updateScroll);\r\n\r\n        return () => {\r\n            window.removeEventListener(\"scroll\", updateScroll);\r\n        };\r\n    }, []);\r\n\r\n    // HANDLERS --------------------------------------------------------------------------------------------------------\r\n\r\n    /**\r\n     * @desc A change handler for the\r\n     * favorite slider.\r\n     */\r\n    const handleOnChange = () => {\r\n        try {\r\n            dispatch(setFirstSearch(false));\r\n            dispatch(setSingleView(false));\r\n            dispatch(setShowFavoriteDogs(!showingFavoriteDogs));\r\n            setMenuOpen(false);\r\n        } catch (err) {\r\n            dispatch(setError(err));\r\n        }\r\n    };\r\n\r\n    // COMPONENTS ------------------------------------------------------------------------------------------------------\r\n\r\n    /**\r\n     * @desc A dialog background.\r\n     */\r\n    const renderBackground = () => {\r\n        if (menuOpen) {\r\n            return (\r\n                <div className={\"dialog-background\"} onClick={() => setMenuOpen(false)}/>\r\n            );\r\n        }\r\n        return null;\r\n    };\r\n\r\n    const renderBackButton = () => {\r\n      if (singleView) {\r\n          return (\r\n              <span className={`back-icon`} onClick={() => dispatch(setSingleView(false))}>\r\n                   <Icon icon={IconNames.CHEVRON_LEFT}/>\r\n              </span>\r\n          );\r\n      }\r\n      return null;\r\n    };\r\n\r\n    let menuClass = \"menu\";\r\n    if (scrollY > 0) menuClass += \" active\";\r\n    if (singleView) menuClass += \" single-view\";\r\n\r\n    return (\r\n        <>\r\n            <div className={menuClass}>\r\n                {renderBackButton()}\r\n                <span className={`menu-icon`} onClick={() => setMenuOpen(!menuOpen)}>\r\n                   <Icon icon={IconNames.MENU}/>\r\n                </span>\r\n            </div>\r\n            {renderBackground()}\r\n            <CSSTransition in={menuOpen} unmountOnExit mountOnEnter classNames=\"dialog\" timeout={250}>\r\n                <nav>\r\n                    <ul>\r\n                        <li className={showingFavoriteDogs ? \"favorited\" : \"\"}>\r\n                            <Icon icon={IconNames.STAR}/>\r\n                            <Switch checked={showingFavoriteDogs} onChange={handleOnChange}/>\r\n                        </li>\r\n                        <li>\r\n                            <Icon icon={IconNames.MOON}/>\r\n                            <Switch checked={darkTheme} onChange={() => dispatch(setDarkTheme(!darkTheme))}/>\r\n                        </li>\r\n                    </ul>\r\n                </nav>\r\n            </CSSTransition>\r\n        </>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    darkTheme: state.app.darkTheme,\r\n    showingFavoriteDogs: state.dogs.showingFavoriteDogs,\r\n    singleView: state.app.singleView\r\n});\r\n\r\nMenu.propTypes = {\r\n    dispatch: PropTypes.func,\r\n    darkTheme: PropTypes.bool,\r\n    showFavoriteDogs: PropTypes.bool,\r\n    singleView: PropTypes.bool\r\n};\r\n\r\nexport default connect(mapStateToProps)(Menu);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {setError} from \"../../../redux/actions/app\";\r\nimport { Icon, Intent} from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\nimport './error-boundary.scss';\r\n\r\nclass ErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {hasError: false};\r\n    }\r\n\r\n    static getDerivedStateFromError(error) {\r\n        // Update state so the next render will show the fallback UI.\r\n        return { hasError: true };\r\n    }\r\n\r\n    componentDidCatch(error, errorInfo) {\r\n        this.props.dispatch(setError({error,errorInfo}));\r\n    }\r\n\r\n    render() {\r\n        if (this.state.hasError || this.props.hasError) {\r\n            return (\r\n                <main className={\"error-boundary\"}>\r\n                    <div className={\"message\"}>\r\n                        <Icon icon={IconNames.ERROR} intent={Intent.DANGER}/>\r\n                        <h1>Sorry, something went wrong.</h1>\r\n                        <h2>Please try again later.</h2>\r\n                    </div>\r\n                </main>\r\n            );\r\n        }\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\nErrorBoundary.propTypes = {\r\n    dispatch: PropTypes.func,\r\n    hasError: PropTypes.bool\r\n};\r\nexport default ErrorBoundary;","import React, {useState, useEffect, useRef} from 'react';\r\nimport PropTypes from \"prop-types\";\r\nimport {Icon} from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\nimport {setError} from \"../../../redux/actions/app\";\r\nimport {mod, prettifyBreed, breedToKey, keyToBreed , memoizeFilterList} from \"../../../util/util\";\r\nimport './search.scss';\r\n\r\n/**\r\n * @param items {[]} - the items to make searchable and selectable\r\n * @param handleValueChange {function} - a handler to call on the selected item\r\n * @param handleOnFocus {function} - a handler to call on search focus\r\n * @param firstSearch {boolean} - whether the first search is completed\r\n * @param dispatch {function}\r\n * @desc A search bar component for selecting a type of breed.\r\n *\r\n * Features:\r\n *  - displays an option dialog on input focus\r\n *  - allow dialog search on Arrow keys (up & down)\r\n *  - allow option selection on click and Enter key\r\n */\r\nfunction Search({items, handleValueChange, handleOnFocus, firstSearch, dispatch}) {\r\n\r\n    // CONSTANTS -------------------------------------------------------------------------------------------------------\r\n\r\n    const INITIAL_PLACEHOLDER = \"Search dog breed\";\r\n    const KEY_CODE = Object.freeze({\r\n        UP: 38,\r\n        DOWN: 40,\r\n        ENTER: 13\r\n    });\r\n    const inputRef = useRef(null);\r\n\r\n    // COMPONENT STATE -------------------------------------------------------------------------------------------------\r\n\r\n    const [inputVal, setInputVal] = useState('');\r\n    const [showOptions, setShowOptions] = useState(false);\r\n    const [filteredItems, setFilteredItems] = useState([]);\r\n    const [selectedIndex, setSelectedIndex] = useState(0);\r\n    const [placeholder, setPlaceholder] = useState(INITIAL_PLACEHOLDER);\r\n\r\n    // ELEMENT REFS ----------------------------------------------------------------------------------------------------\r\n\r\n    const searchContainerRef = useRef(null);\r\n    const currOptionRef = useRef(null);\r\n\r\n    // SIDE EFFECTS ----------------------------------------------------------------------------------------------------\r\n\r\n    /**\r\n     * @desc Whenever the current option changes,\r\n     * scroll it into view if needed.\r\n     */\r\n    useEffect(() => {\r\n        try {\r\n            const {current} = currOptionRef;\r\n            if (current) current.scrollIntoViewIfNeeded(false);\r\n        } catch (err) {\r\n            dispatch(setError(err));\r\n        }\r\n    }, [selectedIndex]);\r\n\r\n    /**\r\n     * @desc Registers an event listener for detecting\r\n     * clicks outside of the search container. Close the\r\n     * option dialog on outside click.\r\n     */\r\n    useEffect(() => {\r\n        const handleClick = e => {\r\n            if (!searchContainerRef.current.contains(e.target)) {\r\n                setShowOptions(false);\r\n            }\r\n        };\r\n        document.addEventListener(\"mousedown\", handleClick);\r\n\r\n        return () => {\r\n            document.removeEventListener(\"mousedown\", handleClick);\r\n        };\r\n    }, []);\r\n\r\n    /**\r\n     * @desc Whenever items changes, make sure to update the\r\n     * filtered list of items.\r\n     */\r\n    useEffect(() => {\r\n        try {\r\n            setFilteredItems(items)\r\n        } catch (err) {\r\n            dispatch(setError(err));\r\n        }\r\n    }, [items]);\r\n\r\n    /**\r\n     * @desc Whenever the input value changes, update the\r\n     * filtered list of items.\r\n     */\r\n    useEffect(() => {\r\n        const filteredItems = memoizeFilterList(items,inputVal);\r\n        setFilteredItems(filteredItems);\r\n    }, [inputVal]);\r\n\r\n    /**\r\n     * @desc If the component state is currently NOT showing the\r\n     * option dialog, then reset the placeholder.\r\n     */\r\n    useEffect(() => {\r\n        if (!showOptions) setPlaceholder(INITIAL_PLACEHOLDER);\r\n    }, [showOptions]);\r\n\r\n    // HANDLERS --------------------------------------------------------------------------------------------------------\r\n\r\n    /**\r\n     * @param e\r\n     * @desc A change handler for updating\r\n     * the appropriate states on input change.\r\n     */\r\n    const handleOnChange = e => {\r\n        try {\r\n            setInputVal(e.target.value);\r\n            setShowOptions(true);\r\n            if (!e.target.value) setPlaceholder(INITIAL_PLACEHOLDER);\r\n        } catch (err) {\r\n            dispatch(setError(err));\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @desc A click handler for clearing\r\n     * the search bar.\r\n     */\r\n    const handleOnClick = () => {\r\n        try {\r\n            setInputVal('');\r\n            inputRef.current.focus();\r\n        } catch (err) {\r\n            dispatch(setError(err));\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @param key - the string representation of a breed as a key\r\n     * @desc A handler for selecting an option. Updates the input,\r\n     * closes the option dialog, and calls the parent handler.\r\n     */\r\n    const optionSelect = key => {\r\n        try {\r\n            const breed = keyToBreed(key);\r\n            setInputVal(prettifyBreed(breed));\r\n            setShowOptions(false);\r\n            handleValueChange(breed);\r\n            setSelectedIndex(0); // reset\r\n        } catch (err) {\r\n            dispatch(setError(err));\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @param e\r\n     * @desc A keyup handler. Deals with updating\r\n     * the input placeholder and selecting an option.\r\n     */\r\n    const handleOnKeyUp = e => {\r\n        try {\r\n            const {length} = filteredItems;\r\n            let newIndex;\r\n            switch(e.keyCode) {\r\n                case KEY_CODE.DOWN:\r\n                    newIndex = mod(selectedIndex + 1, length);\r\n                    setSelectedIndex(newIndex);\r\n                    setPlaceholder(prettifyBreed(filteredItems[newIndex]));\r\n                    break;\r\n                case KEY_CODE.UP:\r\n                    newIndex = mod(selectedIndex - 1, length);\r\n                    setSelectedIndex(newIndex);\r\n                    setPlaceholder(prettifyBreed(filteredItems[newIndex]));\r\n                    break;\r\n                case KEY_CODE.ENTER:\r\n                    const item = filteredItems[selectedIndex];\r\n                    item && optionSelect(breedToKey(item));\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        } catch (err) {\r\n            dispatch(setError(err));\r\n        }\r\n    };\r\n\r\n    // COMPONENTS ------------------------------------------------------------------------------------------------------\r\n\r\n    /**\r\n     * @desc Renders an options dialog.\r\n     */\r\n    const renderOptions = () => {\r\n        if (showOptions && filteredItems.length) {\r\n            const options = filteredItems.map((breed,i) => {\r\n                const val = breedToKey(breed);\r\n                const label = prettifyBreed(breed);\r\n                const props = {\r\n                    className: \"option\",\r\n                    key: val,\r\n                    'data-value': val\r\n                };\r\n                if (i === selectedIndex) { // special style and ref for current selected option\r\n                    props.className += \" selected\";\r\n                    props.ref = currOptionRef;\r\n                }\r\n                return (<div {...props} onClick={e => optionSelect(e.target.dataset.value)}>{label}</div>);\r\n            });\r\n            return (\r\n                <div className={\"options-container\"}>\r\n                    <div className=\"options\">\r\n                        {options}\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n        return null;\r\n    };\r\n\r\n    /**\r\n     * @desc Renders a button to clear\r\n     * the search container.\r\n     */\r\n    const renderCloseButton = () => {\r\n        if (inputVal) {\r\n            return (\r\n                <span onClick={handleOnClick}>\r\n                      <Icon className={\"close-btn\"} icon={IconNames.SMALL_CROSS}/>\r\n                </span>\r\n            );\r\n        }\r\n        return null;\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className={\"search-container\"}\r\n            style={{'width': (firstSearch ? '50%' : \"80%\")}}\r\n            ref={searchContainerRef}>\r\n            <Icon className=\"search-btn\" icon={IconNames.SEARCH}/>\r\n            {renderCloseButton()}\r\n            <input\r\n                type=\"text\"\r\n                className={(showOptions ? \"focus\" : \"\") + (showOptions && filteredItems.length ? \" dropdown\" : \"\")}\r\n                value={inputVal}\r\n                spellCheck={false}\r\n                onKeyUp={handleOnKeyUp}\r\n                onChange={handleOnChange}\r\n                placeholder={placeholder}\r\n                onFocus={handleOnFocus}\r\n                ref={inputRef}/>\r\n            {renderOptions()}\r\n        </div>\r\n    );\r\n}\r\n\r\nSearch.propTypes = {\r\n    items: PropTypes.arrayOf(PropTypes.objectOf(PropTypes.string)),\r\n    handleValueChange: PropTypes.func,\r\n    firstSearch: PropTypes.bool,\r\n    dispatch: PropTypes.func\r\n};\r\n\r\nexport default Search;\r\n","import {fetchBreeds} from \"../../api\";\r\nimport {FETCH_BREEDS} from \"./actionTypes\";\r\n\r\nfunction initialAction() {\r\n    return {\r\n        type: FETCH_BREEDS.INITIAL\r\n    }\r\n}\r\n\r\nfunction successAction(res) {\r\n    return {\r\n        type: FETCH_BREEDS.SUCCESS,\r\n        breeds: res.message\r\n    }\r\n}\r\n\r\nfunction failureAction(err) {\r\n    return {\r\n        type: FETCH_BREEDS.FAILURE,\r\n        err\r\n    }\r\n}\r\n\r\nexport default () => {\r\n    return async (dispatch) => {\r\n        dispatch(initialAction());\r\n        try {\r\n            const res = await fetchBreeds();\r\n            if (res.status === \"success\") {\r\n                dispatch(successAction(res));\r\n            } else {\r\n                dispatch(failureAction(res));\r\n            }\r\n        } catch (e) {\r\n            dispatch(failureAction(e))\r\n        }\r\n    };\r\n}","import React, {useEffect, useState, useMemo} from 'react';\nimport PropTypes from 'prop-types';\nimport {connect} from 'react-redux';\nimport Photos from \"../photos/photos\";\nimport Menu from \"../menu/menu\";\nimport ErrorBoundary from \"../../non-connected/error-boundary/error-boundary\";\nimport Search from '../../non-connected/search/search';\nimport {getRandomDogs, setCurrentBreed, refreshCurrentDogs} from '../../../redux/actions/dogs';\nimport fetchBreeds from '../../../redux/actions/breeds';\nimport {setFirstSearch, setError} from \"../../../redux/actions/app\";\nimport {breedToKey} from \"../../../util/util\";\nimport {Icon} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport './App.scss';\n\n/**\n * @param appState\n * @param dogState\n * @param breeds\n * @param dispatch - provided by connect, used to dispatch actions\n * @desc App is a top level connected component.\n *\n * Main Responsibilities:\n *  - fetching breeds data from Dogs API\n *  - updating theme\n *  - displaying a memoized photos component\n */\nfunction App({appState, dogState, breeds, dispatch}) {\n\n    // CONSTANTS -------------------------------------------------------------------------------------------------------\n\n    const {firstSearch, darkTheme, singleView, hasError} = appState;\n    const {dogs, currentBreed, showingFavoriteDogs, currentDogs} = dogState;\n\n    // SIDE EFFECTS ----------------------------------------------------------------------------------------------------\n\n    /**\n     * @desc Fetch all of the possible breeds\n     * and subBreeds only once.\n     */\n    useEffect(() => {\n        try {\n            dispatch(fetchBreeds());\n        } catch (err) {\n            dispatch(setError(err));\n        }\n    }, []);\n\n    /**\n     * @desc Whenever the theme changes,\n     * update the html class accordingly.\n     */\n    useEffect(() => {\n        if (darkTheme) {\n            document.querySelector(\"html\").className = \"dark\";\n            return;\n        }\n        document.querySelector(\"html\").className = \"light\";\n    }, [darkTheme]);\n\n    // HANDLERS --------------------------------------------------------------------------------------------------------\n\n    /**\n     * @param breed\n     * @param subBreed\n     * @desc A handler for dispatching actions to the\n     * app and dog state according to the value selected\n     * from the search component.\n     */\n    const handleValueChange = async ({breed,subBreed}) => {\n        try {\n            const key = breedToKey({breed,subBreed});\n            if (!(key in dogs)) {\n                await dispatch(getRandomDogs(breed, subBreed));\n            }\n            await dispatch(setCurrentBreed(key));\n            dispatch(refreshCurrentDogs());\n        } catch (err) {\n            dispatch(setError(err));\n        }\n    };\n\n    /**\n     * @desc A focus handler for setting\n     * first search to false.\n     */\n    const handleOnFocus = () => {\n        try {\n            dispatch(setFirstSearch(false));\n        } catch (err) {\n            dispatch(setError(err));\n        }\n    };\n\n    // COMPONENTS ------------------------------------------------------------------------------------------------------\n\n    /**\n     * @desc Memoize the return value to control\n     * when the photos component re-renders.\n     */\n    const dogPhotos = useMemo(() => {\n        if (currentBreed && dogs[currentBreed] && dogs[currentBreed].size) {\n            return (<Photos/>);\n        }\n        return null;\n    }, [dogs, currentBreed]);\n\n    /**\n     * @desc A small component to show when\n     * the user has selected \"favorites\" and\n     * there are currently no favorite dogs\n     * in the app state.\n     */\n    const noFavorites = (\n      <div className={\"no-favorites\"}>\n          <div>Click on the \"</div>\n          <Icon icon={IconNames.STAR_EMPTY}/>\n          <div>\" icon to favorite a photo.</div>\n      </div>\n    );\n\n    const searchProps = {\n        items: breeds,\n        handleValueChange,\n        handleOnFocus,\n        firstSearch,\n        dispatch\n    };\n\n    return (\n        <ErrorBoundary dispatch={dispatch} hasError={hasError}>\n            <main className={singleView ? \"single-view\" : \"\"}>\n                <div className={`query-container ${firstSearch ? \"first-search\" : \"\"}`}>\n                    <Search {...searchProps}/>\n                </div>\n                {(showingFavoriteDogs && !currentDogs.length) ? noFavorites : dogPhotos}\n            </main>\n            <Menu/>\n        </ErrorBoundary>\n    );\n}\n\nApp.propTypes = {\n    appState: PropTypes.object,\n    dogState: PropTypes.object,\n    breeds: PropTypes.array,\n    dispatch: PropTypes.func\n};\n\nconst mapStateToProps = (state) => ({\n    dogState: state.dogs,\n    breeds: state.breeds.breeds,\n    appState: state.app\n});\n\nexport default connect(mapStateToProps)(App);\n","import {FETCH_DOGS, DOGS} from \"../actions/actionTypes\";\r\nimport {updateDogs} from \"../../util/util\";\r\n\r\nconst INITIAL_STATE = {\r\n    inProgress: false,\r\n    dogs: {},\r\n    pageSize: 9,\r\n    currentBreed: null,\r\n    currentDogs: [],\r\n    favoriteDogs: [],\r\n    showingFavoriteDogs: false,\r\n    err: null\r\n};\r\n\r\nexport default (prevState = INITIAL_STATE, action) => {\r\n    let {dogs, pageSize, currentBreed, currentDogs, favoriteDogs} = prevState;\r\n    switch(action.type) {\r\n        case FETCH_DOGS.INITIAL:\r\n            return {\r\n                ...prevState,\r\n                inProgress: true,\r\n                err: null\r\n            };\r\n        case FETCH_DOGS.SUCCESS:\r\n            dogs = updateDogs(prevState.dogs, action);\r\n            return {\r\n                ...prevState,\r\n                inProgress: false,\r\n                dogs,\r\n                err: null\r\n            };\r\n        case FETCH_DOGS.FAILURE:\r\n            return {\r\n                ...prevState,\r\n                inProgress: false,\r\n                err: action.err\r\n            };\r\n        case DOGS.SET_CURRENT_BREED:\r\n            return  {\r\n                ...prevState,\r\n                currentBreed: action.currentBreed,\r\n                showingFavoriteDogs: false, // reset\r\n            };\r\n        case DOGS.REFRESH_CURRENT_DOGS:\r\n            return {\r\n                ...prevState,\r\n                currentDogs: Array.from(dogs[currentBreed]) || []\r\n            };\r\n        case DOGS.APPEND_CURRENT_DOGS:\r\n            return {\r\n                ...prevState,\r\n                currentDogs: [...currentDogs, ...action.currentDogs]\r\n            };\r\n        case DOGS.ADD_FAVORITE:\r\n            return {\r\n                ...prevState,\r\n                favoriteDogs: [...favoriteDogs, action.dog]\r\n            };\r\n        case DOGS.REMOVE_FAVORITE:\r\n            const newFavoriteDogs = [...favoriteDogs];\r\n            const index = newFavoriteDogs.findIndex(val => val === action.dog);\r\n            if (index > -1) {\r\n                newFavoriteDogs.splice(index,1);\r\n            }\r\n            return {\r\n                ...prevState,\r\n                favoriteDogs: newFavoriteDogs\r\n            };\r\n        case DOGS.SET_SHOW_FAVORITES:\r\n            if (action.showFavoriteDogs) {\r\n                return {\r\n                    ...prevState,\r\n                    showingFavoriteDogs: true,\r\n                    currentDogs: favoriteDogs.slice(0,pageSize)\r\n                };\r\n            }\r\n            currentDogs = [];\r\n            if (currentBreed && dogs[currentBreed]) {\r\n                currentDogs = Array.from(dogs[currentBreed]).slice(0,pageSize);\r\n            }\r\n            return {\r\n                ...prevState,\r\n                showingFavoriteDogs: false,\r\n                currentDogs\r\n            };\r\n        default:\r\n            return prevState;\r\n    }\r\n}","import {FETCH_BREEDS} from \"../actions/actionTypes\";\r\n\r\nconst INITIAL_STATE = {\r\n    inProgress: false,\r\n    breeds: [],\r\n    err: null\r\n};\r\n\r\n/**\r\n * @param breeds\r\n * @returns {[]}\r\n * @desc Formats the object from the Dogs Breeds endpoint\r\n * to an array of breeds and sub-breeds.\r\n * Object to format: https://dog.ceo/api/breeds/list/all\r\n */\r\nfunction formatBreeds(breeds) {\r\n    const result = [];\r\n    Object.entries(breeds).forEach(([breed,subBreeds]) => {\r\n        if (subBreeds.length) {\r\n            subBreeds.forEach(subBreed => result.push({breed, subBreed}));\r\n        } else {\r\n            result.push({breed, subBreed: null});\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\nexport default (prevState = INITIAL_STATE, action) => {\r\n    switch(action.type) {\r\n        case FETCH_BREEDS.INITIAL:\r\n            return {\r\n                ...prevState,\r\n                inProgress: true,\r\n                breeds: [],\r\n                err: null\r\n            };\r\n        case FETCH_BREEDS.SUCCESS:\r\n            const breeds = formatBreeds(action.breeds);\r\n            return {\r\n                ...prevState,\r\n                inProgress: false,\r\n                breeds,\r\n                err: null\r\n            };\r\n        case FETCH_BREEDS.FAILURE:\r\n            return {\r\n                ...prevState,\r\n                inProgress: false,\r\n                breeds: [],\r\n                err: action.err\r\n            };\r\n        default:\r\n            return prevState;\r\n    }\r\n}","import {APP} from \"../actions/actionTypes\";\r\n\r\nconst INITIAL_STATE = {\r\n    firstSearch: true,\r\n    darkTheme: true,\r\n    singleView: false,\r\n    hasError: false,\r\n    error: null\r\n};\r\n\r\nexport default (prevState = INITIAL_STATE, action) => {\r\n    switch(action.type) {\r\n        case APP.SET_FIRST_SEARCH:\r\n            return {\r\n                ...prevState,\r\n                firstSearch: action.firstSearch\r\n            };\r\n        case APP.SET_DARK_THEME:\r\n            return {\r\n                ...prevState,\r\n                darkTheme: action.darkTheme\r\n            };\r\n        case APP.SET_SINGLE_VIEW:\r\n            return {\r\n                ...prevState,\r\n                singleView: action.singleView\r\n            };\r\n        case APP.SET_ERROR:\r\n            return {\r\n                ...prevState,\r\n                hasError: true,\r\n                error: action.error\r\n            };\r\n        default:\r\n            return prevState;\r\n    }\r\n}","import {combineReducers} from \"redux\";\r\nimport dogs from \"./dogs\";\r\nimport breeds from \"./breeds\";\r\nimport app from \"./app\";\r\n\r\nexport default combineReducers({dogs, breeds, app});","import {createStore, applyMiddleware} from 'redux';\r\nimport logger from 'redux-logger';\r\nimport finalReducer from './reducers/index';\r\nimport thunk from \"redux-thunk\";\r\n\r\n// todo: remove logger in production env\r\nconst middleware = applyMiddleware(logger, thunk);\r\n\r\nexport default createStore(finalReducer, middleware);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport {Provider} from 'react-redux';\nimport App from './components/connected/app/App';\nimport store from './redux/store';\n\nReactDOM.render(<Provider store={store}><App/></Provider>, document.getElementById('root'));\n"],"sourceRoot":""}